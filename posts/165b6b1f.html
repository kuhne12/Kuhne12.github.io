<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>论文整理（3）Measuring Compositional Consistency for Video Question Answering | Kuhne</title><meta name="keywords" content="论文,视频问答,2022CVPR"><meta name="author" content="Kuhne"><meta name="copyright" content="Kuhne"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="论文整理（3）Measuring Compositional Consistency for Video Question Answering"><meta name="application-name" content="论文整理（3）Measuring Compositional Consistency for Video Question Answering"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="论文整理（3）Measuring Compositional Consistency for Video Question Answering"><meta property="og:url" content="https://blog.kuhne.icu/posts/165b6b1f.html"><meta property="og:site_name" content="Kuhne"><meta property="og:description" content="这是一篇 2022 CVPR 的文章，对视频问答模型处理组成性问题的实质进行了探讨，开发了一个问题分解引擎，并提出了一个分解后的数据集 AGQA-Decomp"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/top2.png"><meta property="article:author" content="Kuhne"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/top2.png"><meta name="description" content="这是一篇 2022 CVPR 的文章，对视频问答模型处理组成性问题的实质进行了探讨，开发了一个问题分解引擎，并提出了一个分解后的数据集 AGQA-Decomp"><link rel="shortcut icon" href="/img/head2.png"><link rel="canonical" href="https://blog.kuhne.icu/posts/165b6b1f"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: {"enable":true,"ck":"3Fpd8lKaw5wGj1Fj","LingQueMonitorID":null},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋，中午要好好休息一下～","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo-api-pearl.vercel.app',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":""},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: {"apiurl":null},
  navMusic: true,
  mainTone: {"mode":"both","api":"https://api.kuhne.icu/api?img=","cover_change":true},
  authorStatus: {"skills":["🐟 上班摸鱼佼佼者"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Kuhne","link":"链接: ","source":"来源: Kuhne","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Kuhne',
  title: '论文整理（3）Measuring Compositional Consistency for Video Question Answering',
  postAI: '',
  pageFillDescription: 'Measuring Compositional Consistency for Video Question Answering, Abstract, 一、Introduction, 二、Related Work, Video question answering, Evaluating consistency, Decomposing question answering., Compositional reasoning, 三、Question decomposition engine, 3.1 Representing questions as programs, 3.2 Decomposing questions using programs, 3.3 AGQA answer generation, 四、Metrics, Compositional accuracy (CA), Right for the wrong reasons (RWR), Delta, Internal Consistency (IC), Accuracy, 五、Experiments, 5.1 Human evaluation, 5.2. Performance on Leaf Nodes, 5.3. Performance on Choose and Equals, 5.4. Performance on Conjunctions, 5.5. Performance on Temporal Reasoning, 5.6. Correlation between consistency and accuracy, 六、 Discussion最近视频问答暗示模型难以回答组成性问题但究竟是哪种类型的组成推理导致模型预测错误仍然不明确而且我们很难辨别模型是否能用或数据偏差来得到正确答案在这篇论文中作者开发了一个问题分解引擎以编程的方式将组成问题分解为子问题的有向无环图每个都是其的组成同时作者提出了一个数据集包含了个问题图平均每张图都有个子问题总共有个新的子问题并且使用一个新颖的组成一致性指标评估了三个模型作者发现这几个模型要么无法通过大量的组成成分正确地推理要么依靠错误的推理来得到答案经常在自相矛盾或中间推理过程失败时才能取得高一组成推理是人类反映视觉事件的基础比如下图是由一系列动作构成的视频片段包括拍照握瓶子粉红色箭头显示错误路径蓝色箭头表示互相矛盾握住瓶子的动作包括演员最初的扭动瓶子然后再握住它为了衡量视觉事件的计算机视觉界提出了很多视频这些问的问题就像是这样模型需要将拍照触碰和手机组合在一起才能得出正确答案自从使用了这些后研究人员最近得出了结论模型难以进行组成推理然而现存的不能解释为什么模型难以进行组成推理在上图中模型错误地回答了这样的信息不能解释是否是因为以下原因导致模型错误产生错误模型难以在时间维度上进行推理比如和模型未能检测出或者模型难以将和结合起来而且即使假定模型已经正确地回答出了问题我们仍然不清楚是因为模型进行了正确的组成推理还是因为它依赖了错误的相关性作弊而得到了正确答案在这方面不仅评估指标有缺陷而且现有的剖析模型行为的方法也很难解决这种不确定性归属方法比如和可以输入数据的重要方面但对组成推理的结构是不可知的依靠反事实来阐明模型行为的方法比如对比集合主要是通过对输入进行微小的局部的改变来关注模型决策边界然而这些局部的改变不能捕捉到回答构成性问题所需的全部推理步骤这些问题同时评估了多种相互依赖的推理能力这篇论文提出了一个问题分解引擎将一个组合问题分解为子问题的有向无环图如上图所示一个子问题分离了原始问题所要求推理步骤的一个子集暴露了模型在中间推理步骤子集上的性能这种暴露能让我们确定模型难以处理的子问题并研究哪些成分会导致模型陷入困境还允许我们测试模型是否有正确的理由来得到正确答案比如之前提到的它不仅能被分解成中间的推理步骤确定这个人在拍照后是否碰了什么东西也能分离出基本的感知能力比如确定手机是否存在作者使用文中提出的引擎构建了数据集该数据集将中个组成问题进行了分解产出了个视频对应的个独特的子问题共记个子问题为了得到子问题作者首先人工设计了个子问题每个问题都有一个对应的功能和自然语言模板如下表所示为了在中组成子问题作者人工设计了条组成规则最后作者创建了一套新的指标来评估组合推理评估指标的其中之一是内部一致性这个指标用于衡量模型在内回答问题时是否自洽为了实现这种指标作者进一步人工设计了个子问题之间的一致性规则补充资料的作者使用了和对应的指标评估了三个模型和分析结果显示对于大多数的组合推理步骤模型要么未能成功完成该步骤要么依赖于错误的推理机制它们经常自相矛盾即使中间步骤得到了错误结果也能达到很高的准确度当被要求在两个选项中进行选择或比较时如或模型甚至会陷入困境最后作者发现对于和不同的内部一致性和准确性之间没有相关性然而对于来说内部一致性和准确性之间有微弱的负相关关系这表明该模型经常不准确且通过其内部一致性而传播这种不准确性二与最近提出的机器学习评估手段进行了比较特别注意并将问题分解的想法与和中的相关工作联系起来尽管任务很受欢迎但几个著名的中的问题还是依赖于对话和情节摘要而不是视频内容侧重的短视频片段要么只有少数几个对象要么遭受人工生成问题产生的影响这些局限降低了在对视觉事件进行推理的有效性鉴于这些限制作者把重点放在最近的上即视觉推理的该文章专注于提供一个超越标准任务准确度的评估指标这与最近对机器学习模型进行更多变态评估的努力相一致虽然它可能是迄今为止唯一提出基于一致性指标的方法但一致性的作用已被用于以及现有的衡量指标模型是否能一致地回答由给定问题所带来的逻辑上的问题集或回答具有不同答案的反事实为了实现这些指标研究人员通过要求数据标注师生成与推理问题相关的感知问题来收集数据集使用大型语言模型生成反事实要求专家编制规则来生成对比集相比而言本文通过人工设计与问题相关的程序来对问题进行程序化分解在和领域中都出现了将任务分解为更简单的任务在中最突出的是神经网络和相关架构将问题分解为模块化程序定义了的神经网络实例化的架构使用依赖性解析来分解问题使用与每个问题相关的程序从场景图和空间时间场景图中计算出答案但这些程序在数据集生成之外都不会被使用多步推理在中多步推理问题被分解为单步问题年钻石头经典赛在为哪支球队效力分解成更简单的哪位选手被评为年钻石头经典赛的多步模型将简单问题的答案结合起来最终回答原始的多步问题解释方法与此类似解释方法将语言分解为树状结构的前提集这些前提集包含了原始的语言火山爆发阻挡阳光意味着火山爆发会杀死植物而将的问题分解为设计神经网络结构的程序本篇文章则将问题分解来设计评价指标虽然存在多种的定义但我们使用更通俗的说法即自下而上的组合性整体是其部分的函数在上面的例子中推理问题摸完电话后这个人是不是拿着一个瓶子需要能够回答更简单的问题这个人触摸了电话吗可以进一步分解为感知问题电话存在吗和时空关系检测问题这个人摸了什么吗最近的研究认为在使模型能够泛化到新的领域类别和逻辑规则方面组合性非常重要并发现目前的模型难以处理多步推理问题三给定问题该模型会输出一个子问题的有向无环图节点是问题的子问题列表而有向边则是用来从的子问题中组成一个问题的组成规则分解这个人摸的第一个物体是什么将产生以下子问题列表这个人在摸什么这个人存在吗这个人在摸什么吗边缘就是其中和是组成规则为了生成首先作者将问题表示为一个函数它由答案所需的各个推理步骤组成如下图所示再递归地迭代这个程序和它的参数来生成问题分解引擎将一个组合式的根问题作为输入并输出一个子问题的根问题有一个相关的函数它解释了回答该问题所需的推理步骤引擎递归地迭代函数的参数直到达到一个叶子函数作者为每个叶子函数设计了自然语言模板将其转换为子问题一旦一个叶子函数被转换为一个问题引擎就会将答案的间接引用返回给它的父级父级使用组成规则来结合来自其子级的间接引用以类似地产生问题这里的和都是为定制的但是引擎可以推广到其他涉及问题对的数据集比如或者这就需要根据数据集的函数程序来定义和作者假定所有的问题都有一个对应的函数程序和多个推理步骤的函数程序是直观上来看这个特定的程序会搜索给定视频的所有帧来找到一个实例实例中有一个出现同样的他也会找到某一帧中有一个人正在从这几帧中它会提取被正在的最后它从确定的对象列表中第一个每一个推理步骤都是由多个参数组成的函数比如上面的例子中函数包含了参数和作者在中利用了个问题每个问题都是用与个自然语言模板相关的个独特函数生成的为了分解问题作者用拓扑排序遍历顶层函数的所有参数并递归地分解每个参数比如的顶层推理函数是首先遍历它的参数然后递归地遍历的两个参数和最终将到达一个叶子程序即没有把更多的函数作为参数的程序为了将叶子程序转为的一个节点作者为每一个程序设计了一个自然语言问题模板比如对于有对应的语言模板这样就能创建一个子问题在遍历另一个参数前首先会检查是否已经添加了如果就会使用语言模板创建一个新的节点然后将其添加进一旦将一个叶子函数转换为引擎就会解析模板以提取间接引用并将其送回其父函数对于一个父函数会使用它的参数和以及一个组成规则来产生一个节点作者设计的组成规则如下表所示组成规则将传回的间接引用代入它对应的模板接下来将与两个参数之间的边添加到使用组成规则将参数组合在一起这个过程会一直持续直到返回到原始的顶级函数一旦所有的问题被分解为子问题的引擎就以编程的方式将答案从原始问题传播到子问题如果一些子问题已经存在于原始的数据集中那么这些问题会自动得到答案对于其他的问题作者制定了逻辑一致性规则来生成答案补充资料一个问题的答案是那么它所有的子问题就都应该是问题的答案是那么问题的答案也会是一个问题的答案是那么沿着递归调用的所有子问题的答案都应该是而其他的答案都应该是问题答案是那么问题答案就应该是但是问题答案就是但是答案生成规则是无法传播问题答案为的答案问题的答案是就不能回答问题为了能够回答这些问题作者在上运行了一个大规模的注释任务以识别中随机选择的视频子集中出现的所有物体细节见补充资料作者使用这些注释来传播子问题答案为的答案最后作者平衡了答案分布以得到最终的数据集在生成原始的平衡数据集时它的作者使用了一个答案平滑算法来缓解训练过程中的偏差然而在中加入子问题会改变训练答案的分布情况为了减少新答案分布的偏差作者也采用了相同的四利用人工设计的子问题类型和组成规则作者设计了新的指标来衡量模型的组成准确性测试模型是否会因错误的原因而得到正确答案并确定模型是否具有内部一致性作者设计的衡量标准是互补的应一起用于指导误差分析可以在补充资料中找到的正式定义一个以组合的方式进行推理的模型在正确回答其子问题时应该也能够正确回答给定的父问题作者用指标来衡量这个方面指标衡量的是模型回答父问题的准确率且该模型正确回答了所有直接的小问题如果某一类问题的值很低那就说明中间推理步骤出现了问题由于给定问题的子问题代表中间推理过程如果一个模型正确地回答了那么它就应该能正确地回答所有子问题如果不能做到这一点就意味着该模型是依靠错误的决策来得到正确答案指标是为了确定发生这种错误推理的程度为了得到这个值作者在模型至少错误回答了一个子问题的情况下去衡量父问题答案的准确性如果某一类别存在高值那就意味着该模型中间步骤推理存在问题为了细化这个指标作者还根据模型错误回答子问题的个数正好错误回答了父问题的个子问题来计算不同父问题的准确率作者把这个指标称为并在补充资料中介绍其结果作者通过计算和的差得出了更多的见解理想情况下将低于导致负的值如果值是正数这意味着模型推理出错了因为模型在一个子问题上出错时它的表现更好无论准确性如何一个按成分推理的模型不应该产生互相矛盾的答案与过去大多数衡量一致性工作不同的是作者使用了自己的逻辑一致性规则补充资料及其反证来确定模型是否自洽无需获得作者注意到值考虑的大多数成分都有多个与之相关的逻辑一致性规则为了给指定组成规则计算指标作者首先测量了一个模型对其每个逻辑一致性规则满足的一致性检查的百分比然后对这些百分比取平均得出该部分的值通过这种方式可以避免过度强调一个比较常见的规则单个逻辑一致性规则的分数可以在补充资料中找到为了了解模型的基本性能作者还计算了三个模型在每个问题类型上的准确性为了提升答案在分布长尾上的作用作者计算了每个答案的准确性然后对所有答案进行标准化五在实验部分作者在上评估了三个模型分析了他们的组合推理能力作者首先分析了叶子节点上的然后分析了三组不同的成分推理步骤和问题问题以及问题在分析过程中值可以确定模型在哪些推理步骤中遇到了困难值检查模型是否在中间推理步骤失败的情况下也能达到高准确度值则负责确定模型自相矛盾的频率作者还引用了值单个一致性规则的值和每个答案的精确度来支持分析这些数值的完整表格可以在补充资料中找到作者使用了论文中评估的三个模型拥有融合了视觉和问题特征的记忆模块创建了一个可重复使用的多层结构模块在每一层都整合了运动问题和视觉特征利用的和块整合视觉和语言特征与论文一样作者也考虑了一个模型该模型为每个问题类型输出最常见的答案作为仅依赖语言偏差的作者在数据集上训练模型该数据集被子问题所增强当验证准确率趋于平稳时停止训练为了评估引擎生成问题和答案的质量作者首先启动了一个人工评估研究作者向数据标注人员在每个子问题类型里提供了至少个随机抽取的问题并采用中提出的人工评估协议要求数据标注员观看相关的视频以验证每个问题标注员将的问题答案标记为正确这意味着问题中约有的错误答案这些错误源于场景图的标注错误和模糊的关系作者在补充材料中描述了人为错误的来源为了说明这个数字作者也人工评估了和这三个最近的分别得到了和的人工准确率在检查和类别的模型准确性时作者发现每个模型在基本的感知问题上都很吃力怀疑在更复杂的类别上的表现这两个类别的模型要么与持平要么比它还差通过检查模型在每个中的作者发现模型在类型的问题中严重倾向于的答案在答案是或的问题上分别达到和的补充资料模型在类别上也有类似的偏差在回答答案是和的问题上分别达到和的在这两类问题上的表现都接近或低于巧合只有在回答类答案为的问题上能达到以上的三种指标能证明模型不仅在和类问题上会遇到困难而且它们还依赖于不正确的推理首先通过观察值可以发现即使模型正确回答了所有的子问题但是它们在这些二元问题上只有的准确性模型在面对问题时的表现特别差和在问题上分别取得了和的值此外模型在部分中取得的分数最多为为不正确的推理提供了证据当部分要求对两个事件进行排序时模型的推理就特别有问题了和的预测在此规则下仅有和是自洽的补充资料对于类问题可以得到类似的结论和分别有和的值意味着它们在子问题上回答错误后可以较好的回答父问题相比之下得到了的值表明中间推理过程的错误对该模型的性能只有很小的负面影响如果以组合方式进行推理就不会发生这种情况在连词类问题上模型不能进行组合推理的证据大范围存在和虽然和在和和和成分问题上都得到了很高的值但得到这些高分主要来自于父问题有作为对于值和在答案为的问题上得到了和而对于答案为的问题却只有和两种模型对来说都获得了约的值对来说获得了超过的值当在中间推理步骤上犯错时模型的表现远远高于偶然这表明他们正确回答以作为答案的问题并不是因为理解了逻辑连接词但是的表现却不同对于问题他得到了很低的分意味着它接近于偶然但是在另一方面却表现得像正确理解了问题它在正确答案为的问题上能达到的值在正确答案为的问题上能达到的值而它的值同样高达表在父问题为和的一致性检查中它分别有和的值虽然它的值是表会让人怀疑对问题是否有一个基本的理解但它的高和值还是能表明它可以成功执行推理最后作者在类上分析了模型的性能首先是问题类型作者根据时间类型进行分割分析或首先发现在和部分只能得到很低的值和而和在这几个部分都能获得更高的值它们的高分可能来源于中间部分错误的推理当父问题的答案是时三个模型在值上的得分都低于在这几个部分的分值为进一步指出了中间部分存在错误的推理然而模型在部分的表现会让人联想起前面的部分尽管在父问题正确答案是的情况下能获得高达的值但是值却只有值为这说明它的高分来源于错误的推理同时和取得了较高的值值没有超过偶然表分别获得和的高值这些模型可以成功地执行的推理步骤即使它们对和的理解可能是错误的另一方面还涉及部分要求模型在时间上对两种不同的关系或行动进行推理有的值说明它无法执行这个任务即使和能得到正确答案这也可能是由于错误的相关性导致的例如虽然和分别获得了和的值表但它们也获得了和的值意味着它们的表现好坏并不取决于中间推理步骤准确与否模型在上的整体表现不佳与和问题的表现相似这两个问题也需要对两个不同的组成部分进行推理作者测试了指标是否可以预测模型的准确性因为这可以在阶段帮助用户具体来说作者衡量内部一致性是否与准确性相关为了做到这一点作者通过测量一个中所有中正确逻辑一致性检查的百分比来计算的内部一致性并与整个的准确性进行比较下图显示内部一致性要么与准确性没有相关性要么是弱的负相关和的相关系数分别为和的负相关可以解释为它偏向于的答案见附录中的表而在的中的答案较少因为一致性检查只能传播的答案因此虽然是高度一致的但它也经常是不正确的这导致不准确在整个层次中传播另一方面和是较少的模型但也经常因错误的原因得到正确答案由于这些模型不进行成分推理所以它们的内部一致性不能预测其准确性六总的来说这篇文章的作者开发了一个问题分解引擎并生成了数据集希望能促进对模型的分析而不是平均准确率得到的结果是不理想的模型经常自相矛盾而且经常因错误的原因而得到正确答案',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-04 13:22:06',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Kuhne" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/head.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="/null" title="暂无"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="暂无"/><span class="back-menu-item-text">暂无</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Kuhne</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=883682303&amp;server=netease&amp;type=playlist"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/essay/"><span> 闲言碎语</span></a></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/2022CVPR/" style="font-size: 1.05rem;">2022CVPR<sup>2</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/Kaggle/" style="font-size: 1.05rem;">Kaggle<sup>2</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/PyTorch/" style="font-size: 1.05rem;">PyTorch<sup>9</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>6</sup></a><a href="/tags/Pytorch/" style="font-size: 1.05rem;">Pytorch<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 1.05rem;">SpringCloud<sup>9</sup></a><a href="/tags/Vue/" style="font-size: 1.05rem;">Vue<sup>3</sup></a><a href="/tags/nginx/" style="font-size: 1.05rem;">nginx<sup>1</sup></a><a href="/tags/pycharm/" style="font-size: 1.05rem;">pycharm<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 1.05rem; font-weight: 500; color: var(--anzhiyu-lighttext)">人工智能<sup>21</sup></a><a href="/tags/%E4%BD%9C%E4%B8%9A/" style="font-size: 1.05rem;">作业<sup>8</sup></a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 1.05rem;">加密<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 1.05rem;">后端<sup>3</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">基础<sup>12</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">工具<sup>3</sup></a><a href="/tags/%E5%BD%92%E7%BA%B3/" style="font-size: 1.05rem;">归纳<sup>3</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">教程<sup>10</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.05rem;">服务器<sup>1</sup></a><a href="/tags/%E6%9C%AA%E5%AE%8C%E6%88%90/" style="font-size: 1.05rem;">未完成<sup>1</sup></a><a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">机器学习<sup>21</sup></a><a href="/tags/%E6%A8%A1%E5%9E%8B%E5%A4%8D%E7%8E%B0/" style="font-size: 1.05rem;">模型复现<sup>8</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem; font-weight: 500; color: var(--anzhiyu-lighttext)">深度学习<sup>15</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">网页前端<sup>4</sup></a><a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 1.05rem;">考研<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E5%85%B3%E7%B3%BB%E6%8E%A2%E6%B5%8B/" style="font-size: 1.05rem;">视觉关系探测<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E9%97%AE%E7%AD%94/" style="font-size: 1.05rem;">视觉问答<sup>1</sup></a><a href="/tags/%E8%A7%86%E9%A2%91%E9%97%AE%E7%AD%94/" style="font-size: 1.05rem;">视频问答<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/" style="font-size: 1.05rem;">计算机视觉<sup>12</sup></a><a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 1.05rem;">论文<sup>4</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">16</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" itemprop="url">深度学习</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E8%AE%BA%E6%96%87/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>论文</span></a><a class="article-meta__tags" href="/tags/%E8%A7%86%E9%A2%91%E9%97%AE%E7%AD%94/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>视频问答</span></a><a class="article-meta__tags" href="/tags/2022CVPR/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>2022CVPR</span></a></span></div></div><h1 class="post-title" itemprop="name headline">论文整理（3）Measuring Compositional Consistency for Video Question Answering</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-09-03T07:28:11.000Z" title="发表于 2022-09-03 15:28:11">2022-09-03</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-03-04T05:22:06.640Z" title="更新于 2023-03-04 13:22:06">2023-03-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">7.6k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>25分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="论文整理（3）Measuring Compositional Consistency for Video Question Answering"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为杭州"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>杭州</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/165b6b1f.html#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/top2.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.kuhne.icu/posts/165b6b1f.html"><header><a class="post-meta-categories" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" itemprop="url">深度学习</a><a href="/tags/%E8%AE%BA%E6%96%87/" tabindex="-1" itemprop="url">论文</a><a href="/tags/%E8%A7%86%E9%A2%91%E9%97%AE%E7%AD%94/" tabindex="-1" itemprop="url">视频问答</a><a href="/tags/2022CVPR/" tabindex="-1" itemprop="url">2022CVPR</a><h1 id="CrawlerTitle" itemprop="name headline">论文整理（3）Measuring Compositional Consistency for Video Question Answering</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Kuhne</span><time itemprop="dateCreated datePublished" datetime="2022-09-03T07:28:11.000Z" title="发表于 2022-09-03 15:28:11">2022-09-03</time><time itemprop="dateCreated datePublished" datetime="2023-03-04T05:22:06.640Z" title="更新于 2023-03-04 13:22:06">2023-03-04</time></header><h1>Measuring Compositional Consistency for Video Question Answering</h1>
<h2 id="Abstract">Abstract</h2>
<p>最近，视频问答 benchmarks 暗示 SOTA 模型难以回答<strong>组成性问题</strong>。但究竟是哪种类型的<strong>组成推理</strong>（compositional reasoning）导致模型预测错误仍然不明确，而且我们很难辨别模型是否能用 compositional reasoning 或数据偏差来得到正确答案。在这篇论文中，作者开发了一个<strong>问题分解引擎</strong>，以编程的方式将组成问题<strong>分解为子问题的有向无环图</strong>，每个 parent question 都是其 children question 的组成。</p>
<p>同时作者提出了一个 benchmark 数据集：<strong>AGQA-Decomp</strong>，包含了 <strong>2.3 M</strong> 个问题图，平均每张图都有 <strong>11.49</strong> 个子问题，总共有 <strong>4.55 M</strong> 个新的子问题，并且使用一个新颖的<strong>组成一致性</strong>（compositional consistency）指标，评估了三个 SOTA 模型。作者发现这几个模型要么<strong>无法通过大量的组成成分正确地推理</strong>，要么<strong>依靠错误的推理来得到答案</strong>，经常在<strong>自相矛盾</strong>或<strong>中间推理过程失败</strong>时，才能取得高 accuracy。</p>
<h2 id="一、Introduction">一、Introduction</h2>
<p><strong>组成推理</strong>是人类反映视觉事件的基础，比如：下图是由一系列动作构成的视频片段，包括<strong>拍照、握瓶子</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/26/122025-67a86.png" alt=""></p>
<p>（粉红色箭头显示错误路径，蓝色箭头表示互相矛盾）</p>
<p>握住瓶子的动作包括演员最初的扭动瓶子，然后再握住它。为了衡量视觉事件的 compositional reasoning，计算机视觉界提出了很多视频 QA benchmarks，这些 benchmark 问的问题就像是这样：**Is a phone the first object that the person is touching after taking a picture? ** 模型需要将  action （拍照）， relationships（触碰）和 object（手机）组合在一起，才能得出正确答案。自从使用了这些 benchmarks 后，研究人员最近得出了结论：SOTA 模型难以进行组成推理。</p>
<p>然而现存的 benchmarks 不能解释为什么 VidQA 模型难以进行组成推理，在上图中，模型错误地回答了 root question，这样的信息不能解释是否是因为以下原因导致模型错误产生错误：</p>
<p><strong>（1）</strong> 模型难以在时间维度上进行推理，比如 <code>first</code> 和 <code>after</code>；</p>
<p><strong>（2）</strong> 模型未能检测出 object <code>phone</code> 或者 relation <code>touching</code>；</p>
<p><strong>（3）</strong> 模型难以将 relation 和object 结合起来。</p>
<p>而且，即使假定模型已经正确地回答出了问题，我们仍然不清楚是因为模型进行了<strong>正确的组成推理</strong>，还是因为它<strong>依赖了错误的相关性</strong> “作弊” 而得到了正确答案。</p>
<p>在这方面，不仅<strong>评估指标</strong>有缺陷，而且现有的<strong>剖析模型行为的方法</strong>也很难解决这种不确定性：</p>
<ul>
<li>
<p><strong>Attribution （归属）方法</strong></p>
<p>比如 <code>GradCAM</code> 和 <code>LIME</code> 可以 highlight 输入数据的重要方面，但对组成推理的结构是不可知的。</p>
</li>
<li>
<p><strong>依靠 counterfactuals （反事实）来阐明模型行为的方法</strong></p>
<p>比如 <code>contrast sets</code> （对比集合），主要是通过对输入进行微小的、局部的改变来关注模型决策边界，然而这些局部的改变不能捕捉到<strong>回答构成性问题所需的全部推理步骤</strong>，这些问题同时评估了多种相互依赖的推理能力。</p>
</li>
</ul>
<p>这篇论文提出了一个<strong>问题分解引擎</strong>，将一个组合问题分解为子问题的<strong>有向无环图</strong>（directed acyclic graph, DAG），如上图所示。</p>
<p>一个子问题分离了原始问题所要求推理步骤的一个子集，<strong>暴露了模型在中间推理步骤子集上的性能</strong>。这种暴露能让我们确定模型难以处理的子问题，并研究<strong>哪些成分会导致模型陷入困境</strong>，还允许我们测试模型是否有<strong>正确的理由</strong>来得到正确答案。</p>
<blockquote>
<p>比如之前提到的 root question，它不仅能被分解成中间的推理步骤，确定 “这个人在拍照后是否碰了什么东西”，也能分离出基本的感知能力，比如确定 “手机是否存在”。</p>
</blockquote>
<p>作者使用文中提出的引擎，构建了 AGQA-Decomp 数据集，该数据集将 balanced AGQA benchmark 中 <strong>2.3 M</strong> 个组成问题进行了分解，产出了 <strong>9.6K</strong> 个视频对应的 <strong>1.62M</strong> 个独特的子问题，共记 <strong>4.55M</strong> 个子问题。</p>
<p>为了得到子问题，作者首先人工设计了 21 个子问题，每个问题都有一个对应的功能和自然语言模板，如下表所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/26/122025-c3a60.png" alt=""></p>
<p>为了在 DAG 中组成子问题，作者人工设计了 13 条组成规则：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/26/122025-b6457.png" alt=""></p>
<p>最后作者创建了一套新的指标来<strong>评估组合推理</strong>，评估指标的其中之一是<strong>内部一致性</strong>（internal consistency），这个指标用于衡量**模型在 DAG 内回答问题时是否自洽（self-consistent）。**为了实现这种指标，作者进一步人工设计了 10 个子问题之间的一致性规则（补充资料的 Table 5）。</p>
<p>作者使用了 DAGs 和对应的指标，评估了三个 SOTA VidQA模型：<code>HCRN</code>、<code>HME</code> 和 <code>PSAC</code> 。分析结果显示，**对于大多数的组合推理步骤，模型要么未能成功完成该步骤，要么依赖于错误的推理机制。**它们经常自相矛盾，即使中间步骤得到了错误结果，也能达到很高的准确度。当被要求在两个选项中进行选择或比较时，如 object 或 relationship  ，模型甚至会陷入困境。</p>
<p>最后，作者发现，对于 <code>HCRN</code> 和 <code>PSAC</code>，不同 DAG 的<strong>内部一致性</strong>和<strong>准确性</strong>之间<strong style="color:red;">没有</strong>相关性。然而，对于 <code>HME</code> 来说，<strong>内部一致性</strong>和<strong>准确性</strong>之间有微弱的<strong style="color:red;">负相关</strong>关系，这表明该模型<strong>经常不准确</strong>，且通过其内部一致性而传播这种不准确性。</p>
<h2 id="二、Related-Work">二、Related Work</h2>
<blockquote>
<p>与最近提出的机器学习评估手段进行了比较（特别注意 VidQA），并将<strong>问题分解</strong>的想法与 CV 和 NLP 中的相关工作联系起来。</p>
</blockquote>
<h3 id="Video-question-answering">Video question answering</h3>
<p>尽管 VidQA benchmark 任务很受欢迎，但几个著名的 benchmarks 中的问题还是依赖于<strong>对话</strong>和<strong>情节摘要</strong>，而不是<strong>视频内容</strong>，侧重的短视频片段要么只有少数几个对象，要么遭受<strong>人工生成问题产生 bias</strong> 的影响。这些局限降低了 benchmarks 在对 compositional 视觉事件进行推理的有效性。鉴于这些限制，作者把重点放在最近的 <strong>AGQA</strong>  benchmark 上，即 compositional 视觉推理的QA pair。</p>
<h3 id="Evaluating-consistency">Evaluating consistency</h3>
<p>该文章专注于提供一个超越标准任务（准确度）的<strong>评估指标</strong>，这与最近对机器学习模型进行更多<strong>变态评估</strong>（metamorphic evaluation）的努力相一致。（虽然它可能是迄今为止唯一提出基于一致性指标的 VidQA 方法，但一致性的作用已被用于 ImageQA 以及 textQA。）</p>
<p><strong>现有的衡量指标</strong>：模型是否能一致地回答<strong>由给定问题所带来的逻辑上的问题集</strong>或回答<strong>具有不同答案的反事实</strong>（counterfactuals）。</p>
<p>为了实现这些指标，研究人员通过：</p>
<p>（1）要求数据标注师生成与推理问题相关的<strong>感知问题</strong>，来收集数据集；</p>
<p>（2）使用大型语言模型生成<strong>反事实</strong>（counterfactuals）；</p>
<p>（3）要求专家编制规则来生成<strong>对比集</strong></p>
<p>相比而言，本文通过<strong>人工设计与问题相关的程序，来对问题进行程序化分解</strong>。</p>
<h3 id="Decomposing-question-answering">Decomposing question answering.</h3>
<p>在 CV 和 NLP 领域中都出现了<strong>将 QA 任务分解为更简单的任务</strong>。</p>
<ul>
<li>
<p><strong>CV</strong></p>
<p>在 CV 中最突出的是，神经网络和相关架构<strong>将问题分解为模块化程序</strong>，定义了 QA 的神经网络实例化的架构。</p>
<p><code>ACMN</code>：使用依赖性解析（dependency parses）来分解问题；</p>
<p><code>GQA</code>、<code>AGQA</code> benchmarks：使用与每个问题相关的程序，从<strong>场景图</strong>和<strong>空间-时间场景图</strong>中计算出答案，但这些程序<strong>在数据集生成之外</strong>都不会被使用。</p>
</li>
<li>
<p><strong>NLP</strong></p>
<ul>
<li>
<p><strong>多步推理（“multi-hop” reasoning）</strong></p>
<p>在 NLP 中，多步推理问题被分解为单步（“single-hop”）问题。</p>
<blockquote>
<p>e.g.</p>
<p>Which team does the player named 2015 Diamond Head Classic’s MVP play for?（2015 年钻石头经典赛 MVP 在为哪支球队效力？）</p>
<p>分解成更简单的：</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>Which player was named 2015 Diamond Head Classic’s MVP?（哪位选手被评为2015年钻石头经典赛的 MVP？）</p>
</blockquote>
<p>多步模型将简单问题的答案结合起来，最终回答原始的多步问题。</p>
<ul>
<li>
<p><strong>解释方法 (explanation methods)</strong></p>
<p>与此类似，解释方法将语言分解为树状结构的前提（premises）集，这些<strong>前提集</strong>包含了原始的语言。</p>
<blockquote>
<p>e.g.</p>
<p>eruptions block sunlight（火山爆发阻挡阳光）</p>
<p>意味着</p>
<p>eruptions can kill plants（火山爆发会杀死植物）</p>
</blockquote>
</li>
</ul>
<p>而 <code>BreakItDown</code> 将 <code>HotPotQA</code> 的问题分解为<strong>设计神经网络结构的程序</strong>，本篇文章则<strong>将问题分解来设计评价指标</strong>。</p>
</li>
</ul>
<h3 id="Compositional-reasoning">Compositional reasoning</h3>
<p>虽然存在多种 Compositional 的定义，但我们使用更通俗的说法，即<strong>自下而上的组合性</strong> —— <strong>整体是其部分的函数</strong>。</p>
<blockquote>
<p>e.g.</p>
<p>在上面的例子中，推理问题：</p>
<p>Was the person holding a bottle after touching a phone?（摸完电话后，这个人是不是拿着一个瓶子？）</p>
<p>需要能够回答更简单的问题：</p>
<p>Did the person touch a phone？（这个人触摸了电话吗？）</p>
<p>可以进一步分解为感知问题：</p>
<p>Does a phone exist?（电话存在吗？）</p>
<p>和时空关系检测问题：</p>
<p>Did the person touch something?（这个人摸了什么吗？）</p>
</blockquote>
<p>最近的研究认为，在使模型能够泛化到新的领域、类别和逻辑规则方面，组合性（compositionality）非常重要，并发现目前的模型难以处理<strong>多步推理</strong>问题。</p>
<h2 id="三、Question-decomposition-engine">三、Question decomposition engine</h2>
<p>给定问题 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span> ，该模型会<strong>输出一个子问题的有向无环图</strong>（DAG）<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>N</mi><mi>q</mi></msub><mo separator="true">,</mo><msub><mi>E</mi><mi>q</mi></msub><mo stretchy="false">)</mo><mo>∈</mo><msub><mi>G</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">(N_q,E_q)\in G_q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 。</p>
<p>节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">N_q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 是问题 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span> 的<strong>子问题列表</strong>，而有向边则是用来从 node 的子问题中，组成一个<strong>问题的组成规则</strong>。</p>
<blockquote>
<p>e.g.</p>
<p>分解：</p>
<p>What is the first object that the person is touching?（这个人摸的第一个物体是什么？）</p>
<p>将产生以下子问题列表：</p>
<p>{<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>1</mn></msub><mo>:</mo></mrow><annotation encoding="application/x-tex">s_1:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span></span>  “What is the person touching?” }（这个人在摸什么？）</p>
<p>{<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub><mo>:</mo></mrow><annotation encoding="application/x-tex">s_2:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span></span>  “Does a person exist?” }（这个人存在吗？）</p>
<p>{<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>3</mn></msub><mo>:</mo></mrow><annotation encoding="application/x-tex">s_3:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span></span>  “Is the person touching something?” }（这个人在摸什么吗？）</p>
<p>边缘就是：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><msub><mi>s</mi><mn>1</mn></msub><mo separator="true">,</mo><mi>f</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>s</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>s</mi><mn>2</mn></msub><mo separator="true">,</mo><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>s</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>s</mi><mn>3</mn></msub><mo separator="true">,</mo><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{(q,s_1,first),(s_1,s_2,interaction),(s_1,s_3,interaction)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{(</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">rs</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mclose">)}</span></span></span></span></p>
<p>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">first</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">rs</span><span class="mord mathnormal">t</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">interaction</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span></span></span></span> 是组成规则</p>
</blockquote>
<p>为了生成 DGA，首先作者<strong>将问题 q 表示为一个函数</strong>，它由<strong>答案 q 所需的各个推理步骤</strong>组成，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/26/122025-2df21.png" alt=""></p>
<p>再递归地迭代这个程序和它的参数来生成 DAG。</p>
<blockquote>
<p>问题分解引擎将一个组合式的根问题作为输入，并输出一个子问题的 DAG。根问题有一个相关的函数，它解释了回答该问题所需的推理步骤。引擎递归地迭代函数的参数，直到达到一个叶子函数。作者为每个叶子函数设计了自然语言模板，将其转换为子问题。一旦一个叶子函数被转换为一个问题，引擎就会将答案的间接引用返回给它的父级。父级使用组成规则来结合来自其子级的间接引用，以类似地产生问题。</p>
</blockquote>
<blockquote>
<p>这里的 composition rules 和 templates 都是为 <code>AGQA</code> 定制的，但是引擎可以推广到其他<strong>涉及问题对的数据集</strong>，比如 <code>GQA</code>、<code>CLEVR</code> 或者 <code>CLEVRER</code>。这就需要根据数据集的函数程序来定义 composition rules 和 templates 。</p>
</blockquote>
<h3 id="3-1-Representing-questions-as-programs">3.1 Representing questions as programs</h3>
<p>作者假定所有的问题都有一个对应的<strong>函数程序</strong>，和多个推理步骤。</p>
<blockquote>
<p>e.g.  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span> 的函数程序是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>o</mi><mi>b</mi><mi>j</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>r</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>t</mi><mi>o</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">first(objects(objExists(person),relationExists(touching)))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">rs</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">erso</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">hin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)))</span></span></span></span></p>
<p>直观上来看，这个特定的程序会搜索给定视频的所有帧，来找到一个实例：</p>
<p>（1）实例中有一个 <strong>person</strong> 出现：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objExists(person)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">erso</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>（2）同样的，他也会找到某一帧中有一个人正在 <strong>touching</strong> something：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>t</mi><mi>o</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">relationExists(touching)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">hin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span></p>
<p>（3）从这几帧中，它会提取被 <strong>person</strong> 正在 <strong>touching</strong> 的 <strong>object</strong> ：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>o</mi><mi>b</mi><mi>j</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>r</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>t</mi><mi>o</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objects(objExists(person),relationExists(touching))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">erso</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">hin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">))</span></span></span></span></p>
<p>（4）最后，它从确定的对象列表中 return 第一个 object ：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">first(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">rs</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span></p>
</blockquote>
<p>每一个推理步骤都是由多个参数组成的函数，比如上面的例子中，函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objects(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> 包含了参数：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objExists(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">relationExists(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> .</p>
<p>作者在 <code>AGQA</code> 中，利用了 <strong>2.3M</strong> 个问题，每个问题都是用（与 217 个自然语言模板相关的） 27 个独特函数生成的。</p>
<h3 id="3-2-Decomposing-questions-using-programs">3.2 Decomposing questions using programs</h3>
<p>为了分解问题 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>，作者用<strong>拓扑排序</strong>遍历顶层函数的所有参数，并递归地分解每个参数。</p>
<p>比如： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span> 的顶层推理函数是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">first(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">rs</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> ，首先遍历它的参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objects(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> 然后递归地遍历 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objects(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> 的两个参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objExists(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">relationExists(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> 。</p>
<p>最终将到达一个 &quot;叶子 &quot;程序，即：没有把更多的函数作为参数的程序（e.g. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objExist(person)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">erso</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>）。</p>
<p>为了将叶子程序转为 DAG 的一个节点，作者为每一个程序设计了一个<strong>自然语言问题模板</strong>：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/26/123543-3d112.png" alt=""></p>
<p>比如，对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objExists(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span> 有对应的语言模板：“Does an [object] exist？” ，这样就能创建一个子问题 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">s_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 。</p>
<blockquote>
<p>在遍历另一个参数前，首先会检查是否已经添加了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub><mo>∈</mo><mi>N</mi><mi>q</mi></mrow><annotation encoding="application/x-tex">s_2\in Nq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Nq</span></span></span></span>：如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub><mo mathvariant="normal">∉</mo><msub><mi>N</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">s_2 \notin N_q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.0556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> ，就会使用语言模板创建一个新的节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">s_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = “Does an [object] exist？” 然后将其添加进 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">N_q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 。</p>
</blockquote>
<p>一旦将一个叶子函数转换为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">s_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ，引擎就会解析模板以提取间接引用，并将其送回其父函数。</p>
<p>对于一个父函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>o</mi><mi>b</mi><mi>j</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>r</mi><mi>e</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>E</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>s</mi><mo stretchy="false">(</mo><mi>t</mi><mi>o</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">objects(objExists(person), relationExists(touching))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">erso</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">hin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">))</span></span></span></span> ，会使用它的参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">s_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">s_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 以及一个<strong>组成规则</strong>，来产生一个节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">s_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = “What is the person touching?”</p>
<p>作者设计的<strong>组成规则</strong>如下表所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/26/125702-e8131.png" alt=""></p>
<p>组成规则将传回的间接引用（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">s_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> -&gt; “person” -&gt; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">s_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> -&gt; “touching”）代入它对应的模板：“What is the [object] [relationship]?”</p>
<p>接下来将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">s_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 与两个参数之间的边添加到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">E_q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> ，使用组成规则（Interaction），将参数组合在一起。</p>
<blockquote>
<p>这个过程会一直持续，直到返回到原始的顶级函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mo separator="true">⋅</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">first(·)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">rs</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span>。</p>
</blockquote>
<h3 id="3-3-AGQA-answer-generation">3.3 AGQA answer generation</h3>
<p>一旦所有的问题被分解为子问题的DAG，引擎就以编程的方式将答案从原始 AGQA 问题传播到子问题。</p>
<blockquote>
<p>如果一些子问题已经存在于原始的 AGQA 数据集中，那么这些问题会自动得到答案。对于其他的问题，作者制定了<strong>逻辑一致性规则</strong> （logical consistency rules）来生成答案。（补充资料 Table 5）</p>
</blockquote>
<p>一个 <code>Interaction</code> 问题的答案是 <strong>Yes</strong>，那么它所有的子问题就都应该是 <strong>Yes</strong>。</p>
<blockquote>
<p>问题 “Is the person touching something?” 的答案是 <strong>Yes</strong>，</p>
<p>那么问题 “Does a person exist?” 的答案也会是 <strong>Yes</strong>；</p>
</blockquote>
<p>一个 <code>choose</code> 问题的答案是 <strong>X</strong>，那么沿着 <strong>X</strong> 递归调用的所有子问题的答案都应该是 <strong>Yes</strong>，而其他的答案都应该是 <strong>No</strong>。</p>
<blockquote>
<p>问题 “Did the person throw the blanket but not hold the blanket?” 答案是 <strong>Yes</strong>，</p>
<p>那么问题 “Did the person throw the blanket?” 答案就应该是 <strong>Yes</strong>，</p>
<p>但是问题 “Did the person hold the blanket?”  答案就是 <strong>No</strong>。</p>
</blockquote>
<p>但是答案生成规则是无法传播问题答案为 <strong>No</strong> 的答案。</p>
<blockquote>
<p>问题 “Is the person touching something?” 的答案是 <strong>No</strong>，</p>
<p>就不能回答问题 “Does a person exist?”</p>
</blockquote>
<p>为了能够回答这些问题，作者在 Amazon Mechanical Turk 上运行了一个大规模的注释任务，以识别 AGQA 中随机选择的视频子集中出现的所有物体（细节见补充资料）。作者使用这些注释来传播子问题答案为  <strong>No</strong> 的答案。</p>
<p>最后作者平衡了答案分布，以得到最终的数据集。</p>
<blockquote>
<p>在生成 AGQA 原始的平衡数据集时，它的作者使用了一个 “答案平滑算法” （answer smoothing algorithm），来缓解训练过程中的偏差（bias）。然而在 AGQA 中加入子问题会改变训练答案的分布情况，为了减少新答案分布的偏差，作者也采用了相同的 answer smoothing algorithm。</p>
</blockquote>
<h2 id="四、Metrics">四、Metrics</h2>
<p>利用人工设计的<strong>子问题类型</strong>和<strong>组成规则</strong>（composition rules），作者设计了新的指标来衡量模型的组成准确性（compositional accuracy），测试模型是否会<strong>因错误的原因而得到正确答案</strong>，并确定模型是否具有内部一致性（internally consistent）。</p>
<p>作者设计的衡量标准是互补的，应一起用于指导误差分析（可以在补充资料中找到 Metrics 的正式定义）。</p>
<h3 id="Compositional-accuracy-CA">Compositional accuracy (CA)</h3>
<p>一个以组合的方式进行推理的模型，在正确回答其子问题时，应该也能够正确回答给定的父问题 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>。</p>
<p>作者用 <strong>CA</strong> 指标来衡量这个方面，<strong>CA</strong> 指标衡量的是<strong>模型回答父问题</strong>的准确率，且该模型正确回答了所有直接的小问题。。</p>
<p>如果某一类（问题）的 <strong>CA 值很低</strong>，那就说明<strong>中间推理步骤出现了问题</strong>。</p>
<h3 id="Right-for-the-wrong-reasons-RWR">Right for the wrong reasons (RWR)</h3>
<p>由于给定问题 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span> 的<strong>子问题</strong>代表<strong>中间推理</strong>过程，如果一个模型正确地回答了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>，那么它就应该能正确地回答所有子问题。如果不能做到这一点，就意味着该模型是依靠错误的决策来得到正确答案。</p>
<p><strong>RWR</strong> 指标是为了确定发生这种<strong>错误推理的程度</strong>。</p>
<p>为了得到这个值，作者在模型至少<strong>错误回答了一个子问题</strong>的情况下，去衡量父问题答案的准确性。</p>
<p>如果某一类别存在 <strong>高 RWR</strong> 值，那就意味着该模型<strong>中间步骤推理存在问题</strong>。</p>
<blockquote>
<p>为了细化这个指标，作者还根据<strong>模型错误回答子问题的个数</strong> （正好错误回答了父问题的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个子问题 ），来计算<strong>不同父问题</strong>的准确率。</p>
<p>作者把这个指标称为 <strong>RWR-n</strong>（并在补充资料中介绍其结果）。</p>
</blockquote>
<h3 id="Delta">Delta</h3>
<p>作者通过计算 <strong>RWR</strong> 和 <strong>CA</strong> 的<strong>差</strong>，得出了更多的见解：</p>
<ul>
<li><strong>理想情况下，RWR 将低于 CA，导致负的 Delta 值。</strong></li>
<li><strong>如果 Delta 值是正数，这意味着模型推理出错了，因为模型在一个子问题上出错时，它的表现更好。</strong></li>
</ul>
<h3 id="Internal-Consistency-IC">Internal Consistency (IC)</h3>
<p>无论准确性如何，一个<strong>按成分</strong>推理的模型不应该产生<strong>互相矛盾的答案</strong>。与过去大多数衡量一致性工作不同的是，作者使用了自己的<strong>逻辑一致性规则</strong>（logical consistency rules，补充资料 Table 5） 及其反证来确定模型是否自洽，无需获得 ground-truth。</p>
<blockquote>
<p>作者注意到，<strong>IC</strong> 值考虑的大多数成分都有多个与之相关的逻辑一致性规则。</p>
</blockquote>
<p>为了给指定组成规则计算 <strong>IC</strong> 指标，作者首先测量了一个模型对其每个逻辑一致性规则满足的一致性检查的百分比。然后对这些百分比取平均，得出该部分的 IC 值。</p>
<p>通过这种方式，可以<strong>避免过度强调</strong>一个比较常见的规则。</p>
<blockquote>
<p>单个逻辑一致性规则的 IC 分数可以在补充资料中找到（Table 8）。</p>
</blockquote>
<h3 id="Accuracy">Accuracy</h3>
<p>为了了解模型的基本性能，作者还计算了三个模型在每个问题类型上的准确性。为了提升答案在分布长尾上的作用，作者计算了每个答案的准确性，然后对所有答案进行<strong>标准化</strong>。</p>
<h2 id="五、Experiments">五、Experiments</h2>
<p>在实验部分，作者在 DAG 上评估了三个 SOTA VidQA 模型，分析了他们的<strong>组合推理能力</strong>。</p>
<p>作者首先分析了<strong>叶子节点</strong>上的 accuracy，然后分析了三组不同的成分推理步骤：<code>Choose</code> 和 <code>Equals</code> 问题、<code>Conjunction</code> 问题以及 <code>Temporal Localization</code> 问题。</p>
<blockquote>
<p>在分析过程中，<strong>CA</strong> 值可以确定模型在<strong>哪些推理步骤中遇到了困难</strong>，<strong>RWR</strong> 值检查模型是否在<strong>中间推理步骤失败</strong>的情况下也能达到高准确度，<strong>IC</strong> 值则负责确定模型<strong>自相矛盾</strong>的频率。</p>
<p>作者还引用了 <strong><code>RWR-n</code> 值</strong>、<strong>单个一致性规则的 IC 值</strong>和<strong>每个答案的精确度</strong>来支持分析。</p>
<p>这些数值的完整表格可以在补充资料中找到(Tables 6-9)。</p>
</blockquote>
<ul>
<li><strong>Models.</strong></li>
</ul>
<p>作者使用了 AGQA 论文中评估的三个模型：<code>HME</code>、<code>HCRN</code>、<code>PSAC</code>。</p>
<blockquote>
<p><code>HME</code>：拥有融合了<strong>视觉</strong>和<strong>问题</strong>特征的<strong>记忆模块</strong>。</p>
<p><code>HCRN</code>：创建了一个<strong>可重复使用的多层结构模块</strong>，在每一层都整合了<strong>运动</strong>、<strong>问题</strong>和<strong>视觉</strong>特征。</p>
<p><code>PSAC</code>：利用 position 的 self-attention 和 co-attention 块，整合<strong>视觉</strong>和<strong>语言</strong>特征。</p>
</blockquote>
<p>与 AGQA 论文一样，作者也考虑了一个模型（Most-Likely），该模型为每个问题类型输出最常见的答案，作为仅依赖语言偏差的 baseline。</p>
<ul>
<li><strong>Training.</strong></li>
</ul>
<p>作者在 AGQA balanced 数据集上训练模型，该数据集被 balanced 子问题 DAG 所增强，当验证准确率趋于平稳时，停止训练。</p>
<h3 id="5-1-Human-evaluation">5.1 Human evaluation</h3>
<p>为了评估引擎生成问题和答案的质量，作者首先启动了一个<strong>人工评估</strong> （Human evaluation）研究。</p>
<p>作者向数据标注人员在<strong>每个子问题类型里</strong>提供了至少 25 个随机抽取的问题，并采用 <code>AGQA</code> 中提出的人工评估协议，要求数据标注员观看相关的视频，以验证 QA pair。</p>
<p>每个问题标注员将 <strong>84.36%</strong> 的问题答案标记为正确，这意味着问题中约有 <strong>15.64%</strong> 的错误答案。（Table 3）</p>
<blockquote>
<p>这些错误源于场景图的标注错误和模糊的关系，作者在补充材料中描述了人为错误的来源</p>
<p>为了说明这个数字，作者也人工评估了 <code>GQA</code>、<code>CLEVR</code> 和 <code>AGQA</code> 这三个最近的 benchmark ，分别得到了89.30%、92.60%和86.02%的人工准确率。</p>
</blockquote>
<h3 id="5-2-Performance-on-Leaf-Nodes">5.2. Performance on Leaf Nodes</h3>
<p>在检查 <code>Object Exists</code> 和 <code>Relation Exists</code> 类别的模型准确性（Table 3）时，作者发现每个模型在<strong>基本的感知（perceptual）问题上</strong>都很吃力，怀疑在更复杂的类别上的表现。</p>
<p>这两个类别的模型 accuracy 要么与 &quot;Most-Likely &quot; baseline 持平，要么比它还差。</p>
<p>通过检查模型在每个 groundtruth 中的 accuracy ，作者发现</p>
<ul>
<li>
<p><code>HME</code> 模型在  <code>Relation Exists</code> 类型的问题中，严重倾向于 “No” 的答案，在答案是 “No” 或 &quot;Yes &quot; 的问题上，分别达到 99.11% 和 3.29% 的 accuracy。（补充资料 Table 9）</p>
</li>
<li>
<p><code>PSAC</code> 模型在 <code>Object Exists</code> 类别上也有类似的偏差，在回答答案是 &quot;No &quot;和 &quot;Yes &quot;的问题上分别达到 86.67% 和 3.38% 的 accuracy</p>
</li>
<li>
<p><code>HCRN</code> 在这两类问题上的表现都接近或低于<strong>巧合</strong>，只有在回答 <code>Relation Exists</code> 类答案为 “No” 的问题上能达到 50% 以上的 accuracy</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/27/133545-50397.png" alt="image-20220827133515560"></p>
<h3 id="5-3-Performance-on-Choose-and-Equals">5.3. Performance on Choose and Equals</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/26/222634-4950e.png" alt=""></p>
<p><strong>CA、RWR、IC</strong> 三种指标能证明模型不仅在 <code>Choose</code> 和 <code>Equals</code> 类问题上会遇到困难，而且它们还依赖于<strong>不正确的推理</strong>。(Table 4)</p>
<p>首先，通过观察 <strong>CA</strong> 值可以发现，即使模型正确回答了所有的子问题，但是它们在这些二元问题上只有 50% 的准确性。</p>
<ul>
<li>
<p><strong>Choose</strong></p>
<p>模型在面对 <code>Longer/Shorter Choose</code> 问题时的表现特别差。</p>
<p><code>HCRN</code>、<code>HME</code> 和 <code>PSAC</code> 在 <code>Longer Choose</code>  问题上分别取得了 42.02%, 41.90% 和 38.51% 的 CA 值。</p>
<p>此外，模型在 <code>Choose</code> 部分中取得的 <strong>IC</strong> 分数最多为 12.18%，为不正确的推理提供了证据。当 <code>Choose</code> 部分要求<strong>对两个事件进行排序</strong>时，模型的推理就特别有问题了：<code>HCRN</code>、<code>HME</code> 和 <code>PSAC</code> 的预测在此规则下仅有 4.92%、 0.54% 和 9.56% 是自洽的。（补充资料 Table 8）</p>
</li>
<li>
<p><strong>Equals</strong></p>
<p>对于 <code>Equals</code> 类问题，可以得到类似的结论：<code>HCRN</code> 和 <code>PSAC</code> 分别有 3.96% 和 1.35% 的 <strong>Delta</strong> 值，意味着它们在子问题上回答错误后，可以较好的回答父问题。相比之下 <code>HME</code> 得到了 -5.72% 的 <strong>Delta</strong> 值，表明中间推理过程的错误对该模型的性能只有很小的负面影响。如果以组合方式进行推理，就不会发生这种情况。</p>
</li>
</ul>
<h3 id="5-4-Performance-on-Conjunctions">5.4. Performance on Conjunctions</h3>
<p>在 <code>Conjunction</code> （连词）类问题上，模型不能进行组合推理的证据大范围存在。</p>
<ul>
<li>
<p><strong><code>HME</code> 和 <code>PSAC</code></strong></p>
<p>虽然 <code>HME</code> 和 <code>PSAC</code> 在 <strong>And</strong>（95.81%和88.31%）和 <strong>Xor</strong>（78.91%和84.32%）成分问题上都得到了很高的 <strong>CA</strong> 值，但得到这些高分主要来自于父问题有 &quot;<strong>No</strong> &quot;作为 groundtruth 。</p>
<p>对于 CA 值，<code>HME</code> 和 <code>PSAC</code> 在答案为 “Yes” 的 <code>And</code> 问题上得到了 41.95% 和 37.60% ，而对于答案为 “Yes” 的 <code>Xor</code> 问题却只有 1.41% 和 14.79%。</p>
<p>两种模型对 <code>And</code> 来说都获得了约 80% 的 RWR-1 值，对 <code>Xor</code> 来说获得了超过 80% 的 RWR-2 值（Table 7）。</p>
<p>当在中间推理步骤上犯错时，模型的表现远远高于偶然（chance），这表明他们正确回答<strong>以 &quot;No &quot; 作为答案的问题</strong>并不是因为理解了逻辑连接词。</p>
</li>
<li>
<p><strong><code>HCRN</code></strong></p>
<p>但是 <code>HCRN</code> 的表现却不同，对于 <code>Xor</code> 问题，他得到了很低的 <strong>CA</strong> 分（52.33%），意味着它接近于偶然。但是在另一方面， <code>HCRN</code> 却表现得像正确理解了 <code>And</code> 问题。它在正确答案为 “Yes” 的问题上，能达到 90.66% 的 CA 值，在正确答案为 “No” 的问题上，能达到 84.52% 的 CA 值。而它的 <strong>IC</strong> 值同样高达84.31%（表4），在父问题为 “Yes” 和 &quot;No &quot; 的一致性检查中，它分别有 74.37% 和 94.24%的 <strong>IC</strong> 值。</p>
<p>虽然它的 <strong>RWR-1</strong> 值是48.35（表7），会让人怀疑 <code>HCRN</code> 对问题是否有一个基本的理解，但它的高 <strong>CA</strong> 和 <strong>IC</strong> 值还是能表明它可以成功执行 <code>And</code> 推理。</p>
</li>
</ul>
<h3 id="5-5-Performance-on-Temporal-Reasoning">5.5. Performance on Temporal Reasoning</h3>
<p>最后作者在 <code>Temporal Localization</code> 类上分析了模型的性能，首先是 <code>Exists Temporal Localization</code> 问题类型。</p>
<p>作者根据时间类型进行分割分析：<code>After</code>、<code>Before</code>、<code>While</code> 或 <code>Between</code>。</p>
<p>首先发现 <code>HME</code> 在 <code>After</code>、<code>Before</code> 和 <code>While</code> 部分只能得到很低的 <strong>CA</strong> 值（30.88%, 31.95% 和 24.36%），而 <code>PSAC</code> 和 <code>HCRN</code> 在这几个部分都能获得更高的 <strong>CA</strong>  值，它们的高分可能来源于中间部分错误的推理。</p>
<p>当父问题的答案是 “Yes” 时，三个模型在 <strong>IC</strong> 值上的得分都低于 50%。（Table 8）</p>
<p>在这几个部分，<code>HCRN</code> 的 <strong>RWR-1</strong> 分值为 61.24%, 65.16%, 66.01%，进一步指出了中间部分存在错误的推理。</p>
<p>然而，模型在 <code>Between</code> 部分的表现会让人联想起前面的 <code>And</code> 部分。</p>
<p>尽管 <code>HME</code> 在父问题正确答案是 “Yes” 的情况下能获得高达 94.54% 的 <strong>CA</strong> 值，但是 <strong>IC</strong> 值却只有 42.01%，<strong>RWR-1</strong> 值为 77.83，这说明它的高分来源于错误的推理。</p>
<p>同时，<code>HCRN</code> 和 <code>PSAC</code> 取得了较高的 <strong>CA</strong> 值， RWR 值没有超过偶然（表4，7），分别获得 85.95% 和 87.97% 的高 <strong>IC</strong> 值。</p>
<p>这些模型可以成功地执行 <code>Between</code> 的推理步骤，即使它们对 <code>Befor</code> 和 <code>After</code> 的理解可能是错误的。</p>
<p>另一方面，<code>Interaction Temporal Localization</code>  还涉及 <code>Interaction</code> 部分，要求模型在时间上对两种不同的关系或行动进行推理。</p>
<p><code>PSAC</code> 有 3.91% 的 CA 值，说明它无法执行这个任务，即使 <code>HCRN</code> 和 <code>HME</code> 能得到正确答案，这也可能是由于错误的相关性导致的。</p>
<blockquote>
<p>例如，虽然 <code>HCRN</code> 和 <code>HME</code> 分别获得了 57.82% 和 57.96% 的 <strong>CA</strong> 值（表4），但它们也获得了 55.34% 和 93.92% 的 <strong>RWR-2</strong> 值，意味着它们的表现好坏并不取决于中间推理步骤准确与否。</p>
</blockquote>
<p>模型在 <code>Interaction Temporal Localization</code> 上的整体表现不佳，与 <code>Choose</code> 和 <code>Equals</code> 问题的表现相似，这两个问题也需要对两个不同的组成部分进行推理。</p>
<h3 id="5-6-Correlation-between-consistency-and-accuracy">5.6. Correlation between consistency and accuracy</h3>
<p>作者测试了 <strong>IC</strong> 指标是否可以预测模型的准确性，因为这可以在 inference 阶段帮助用户。</p>
<p>具体来说，作者衡量<strong>内部一致性</strong>是否与<strong>准确性</strong>相关。</p>
<p>为了做到这一点，作者通过测量一个 <strong>DAG</strong> 中所有 compositions 中，正确逻辑一致性检查的百分比，来计算 DAG 的内部一致性，并与整个 DAG 的准确性进行比较。</p>
<p>下图显示，内部一致性要么与准确性没有相关性，要么是弱的负相关，<code>HCRN</code>、<code>HME</code> 和 <code>PSAC</code>  的相关系数分别为-0.086、-0.293和-0.109。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2022/08/26/201930-3a825.png" alt=""></p>
<p><code>HME</code> 的负相关可以解释为：它偏向于 &quot;No &quot;的答案（见附录中的表9），而在的 DAG 中，&quot;No &quot;的答案较少，因为一致性检查只能传播 &quot;Yes&quot;的答案。</p>
<p>因此，虽然 <code>HME</code> 是高度一致的，但它也经常是不正确的，这导致不准确在整个层次中传播。</p>
<p>另一方面，<code>HCRN</code> 和 <code>PSAC</code> 是较少 bias 的模型，但也经常因<strong>错误的原因</strong>得到正确答案。</p>
<p>由于这些模型不进行成分推理，所以它们的内部一致性不能预测其准确性。</p>
<h2 id="六、-Discussion">六、 Discussion</h2>
<p>总的来说，这篇文章的作者开发了一个问题分解引擎，并生成了 AGQA-Decomp 数据集，希望能促进对 VidQA 模型的分析，而不是平均准确率。</p>
<p>得到的结果是不理想的：模型经常自相矛盾，而且经常因错误的原因而得到正确答案。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/head.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/head.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Kuhne</div><div class="post-copyright__author_desc">间接性内卷 持续性摆烂</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.kuhne.icu/posts/165b6b1f.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.kuhne.icu/posts/165b6b1f.html')">论文整理（3）Measuring Compositional Consistency for Video Question Answering</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.kuhne.icu/posts/165b6b1f.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=论文整理（3）Measuring Compositional Consistency for Video Question Answering&amp;url=https://blog.kuhne.icu/posts/165b6b1f.html&amp;pic=https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/top2.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.kuhne.icu" target="_blank">Kuhne</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E8%AE%BA%E6%96%87/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>论文<span class="tagsPageCount">4</span></a><a class="post-meta__box__tags" href="/tags/%E8%A7%86%E9%A2%91%E9%97%AE%E7%AD%94/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>视频问答<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/2022CVPR/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>2022CVPR<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/09/07/20230907192257-a360e8.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/22673bc3.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/dknjyLgQcEXhsuK.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">论文学习笔记整理</div></div></a></div><div class="next-post pull-right"><a href="/posts/3b91aa4a.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/4c417afa91736428def17dcc96aa64b8.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux 服务器环境配置</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/51cb83d8.html" title="论文整理（2）VRDFormer_End-to-End_Video_Visual_Relation_Detection_With_Transformers"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/Snipaste_2022-08-24_13-40-49.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-24</div><div class="title">论文整理（2）VRDFormer_End-to-End_Video_Visual_Relation_Detection_With_Transformers</div></div></a></div><div><a href="/posts/22673bc3.html" title="论文学习笔记整理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/dknjyLgQcEXhsuK.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-24</div><div class="title">论文学习笔记整理</div></div></a></div><div><a href="/posts/cdcf21cf.html" title="论文整理（1） Show, Ask, Attend, and Answer-A strong baseline for visual question answering"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/paper.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-07-28</div><div class="title">论文整理（1） Show, Ask, Attend, and Answer-A strong baseline for visual question answering</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://emotion.acs.pw/emotion/bilibili_hotKey/危.jpg" ait="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">一个菜鸟的垃圾加工厂。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">希望你你可以在这里找到对你有用的<b style="color:#fff">有用</b>的<b style="color:#fff">垃圾</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Kuhne</h1><div class="author-info__desc">间接性内卷 持续性摆烂</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Measuring Compositional Consistency for Video Question Answering</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Abstract"><span class="toc-number">1.1.</span> <span class="toc-text">Abstract</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Introduction"><span class="toc-number">1.2.</span> <span class="toc-text">一、Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Related-Work"><span class="toc-number">1.3.</span> <span class="toc-text">二、Related Work</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Video-question-answering"><span class="toc-number">1.3.1.</span> <span class="toc-text">Video question answering</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Evaluating-consistency"><span class="toc-number">1.3.2.</span> <span class="toc-text">Evaluating consistency</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Decomposing-question-answering"><span class="toc-number">1.3.3.</span> <span class="toc-text">Decomposing question answering.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Compositional-reasoning"><span class="toc-number">1.3.4.</span> <span class="toc-text">Compositional reasoning</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Question-decomposition-engine"><span class="toc-number">1.4.</span> <span class="toc-text">三、Question decomposition engine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Representing-questions-as-programs"><span class="toc-number">1.4.1.</span> <span class="toc-text">3.1 Representing questions as programs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Decomposing-questions-using-programs"><span class="toc-number">1.4.2.</span> <span class="toc-text">3.2 Decomposing questions using programs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-AGQA-answer-generation"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.3 AGQA answer generation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Metrics"><span class="toc-number">1.5.</span> <span class="toc-text">四、Metrics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Compositional-accuracy-CA"><span class="toc-number">1.5.1.</span> <span class="toc-text">Compositional accuracy (CA)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Right-for-the-wrong-reasons-RWR"><span class="toc-number">1.5.2.</span> <span class="toc-text">Right for the wrong reasons (RWR)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Delta"><span class="toc-number">1.5.3.</span> <span class="toc-text">Delta</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Internal-Consistency-IC"><span class="toc-number">1.5.4.</span> <span class="toc-text">Internal Consistency (IC)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Accuracy"><span class="toc-number">1.5.5.</span> <span class="toc-text">Accuracy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Experiments"><span class="toc-number">1.6.</span> <span class="toc-text">五、Experiments</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Human-evaluation"><span class="toc-number">1.6.1.</span> <span class="toc-text">5.1 Human evaluation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Performance-on-Leaf-Nodes"><span class="toc-number">1.6.2.</span> <span class="toc-text">5.2. Performance on Leaf Nodes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-Performance-on-Choose-and-Equals"><span class="toc-number">1.6.3.</span> <span class="toc-text">5.3. Performance on Choose and Equals</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-Performance-on-Conjunctions"><span class="toc-number">1.6.4.</span> <span class="toc-text">5.4. Performance on Conjunctions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-Performance-on-Temporal-Reasoning"><span class="toc-number">1.6.5.</span> <span class="toc-text">5.5. Performance on Temporal Reasoning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-Correlation-between-consistency-and-accuracy"><span class="toc-number">1.6.6.</span> <span class="toc-text">5.6. Correlation between consistency and accuracy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81-Discussion"><span class="toc-number">1.7.</span> <span class="toc-text">六、 Discussion</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/45e85deb.html" title="Nginx 基本使用"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/09/07/20230907192257-a360e8.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx 基本使用"/></a><div class="content"><a class="title" href="/posts/45e85deb.html" title="Nginx 基本使用">Nginx 基本使用</a><time datetime="2023-09-07T11:19:06.000Z" title="发表于 2023-09-07 19:19:06">2023-09-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8d037627.html" title="Git 及 GitHub 常用命令记录"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/02/27/20230227141226-160f64.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git 及 GitHub 常用命令记录"/></a><div class="content"><a class="title" href="/posts/8d037627.html" title="Git 及 GitHub 常用命令记录">Git 及 GitHub 常用命令记录</a><time datetime="2023-02-27T06:08:31.000Z" title="发表于 2023-02-27 14:08:31">2023-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a6d8a9c3.html" title="个人常用 Linux 命令"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/02/26/20230226105141-94929b.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="个人常用 Linux 命令"/></a><div class="content"><a class="title" href="/posts/a6d8a9c3.html" title="个人常用 Linux 命令">个人常用 Linux 命令</a><time datetime="2023-02-26T02:47:48.000Z" title="发表于 2023-02-26 10:47:48">2023-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3b91aa4a.html" title="Linux 服务器环境配置"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/4c417afa91736428def17dcc96aa64b8.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux 服务器环境配置"/></a><div class="content"><a class="title" href="/posts/3b91aa4a.html" title="Linux 服务器环境配置">Linux 服务器环境配置</a><time datetime="2022-09-14T08:01:29.000Z" title="发表于 2022-09-14 16:01:29">2022-09-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/165b6b1f.html" title="论文整理（3）Measuring Compositional Consistency for Video Question Answering"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/top2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="论文整理（3）Measuring Compositional Consistency for Video Question Answering"/></a><div class="content"><a class="title" href="/posts/165b6b1f.html" title="论文整理（3）Measuring Compositional Consistency for Video Question Answering">论文整理（3）Measuring Compositional Consistency for Video Question Answering</a><time datetime="2022-09-03T07:28:11.000Z" title="发表于 2022-09-03 15:28:11">2022-09-03</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:kunhaofu1@gmail.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/head.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/kuhne12" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="等待开发" href="/wait/">等待开发</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="等待开发" href="/wait/">等待开发</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a></div></div></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/09/07/20230907103822-7fe708.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px" data-title="本站已在浙备案" title="本站已在浙备案"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/09/07/20230907104640-663234.svg" alt="本站已在浙备案"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="Kuhne" target="_blank">Kuhne</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="浙ICP备2023005409号-1">浙ICP备2023005409号-1</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">75</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">31</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="/null" title="暂无"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="暂无"/><span class="back-menu-item-text">暂无</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=883682303&amp;server=netease&amp;type=playlist"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/essay/"><span> 闲言碎语</span></a></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/2022CVPR/" style="font-size: 0.88rem;">2022CVPR<sup>2</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/Kaggle/" style="font-size: 0.88rem;">Kaggle<sup>2</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/PyTorch/" style="font-size: 0.88rem;">PyTorch<sup>9</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>6</sup></a><a href="/tags/Pytorch/" style="font-size: 0.88rem;">Pytorch<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 0.88rem;">SpringCloud<sup>9</sup></a><a href="/tags/Vue/" style="font-size: 0.88rem;">Vue<sup>3</sup></a><a href="/tags/nginx/" style="font-size: 0.88rem;">nginx<sup>1</sup></a><a href="/tags/pycharm/" style="font-size: 0.88rem;">pycharm<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 0.88rem; font-weight: 500; color: var(--anzhiyu-lighttext)">人工智能<sup>21</sup></a><a href="/tags/%E4%BD%9C%E4%B8%9A/" style="font-size: 0.88rem;">作业<sup>8</sup></a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 0.88rem;">加密<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 0.88rem;">后端<sup>3</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">基础<sup>12</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">工具<sup>3</sup></a><a href="/tags/%E5%BD%92%E7%BA%B3/" style="font-size: 0.88rem;">归纳<sup>3</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">教程<sup>10</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 0.88rem;">服务器<sup>1</sup></a><a href="/tags/%E6%9C%AA%E5%AE%8C%E6%88%90/" style="font-size: 0.88rem;">未完成<sup>1</sup></a><a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">机器学习<sup>21</sup></a><a href="/tags/%E6%A8%A1%E5%9E%8B%E5%A4%8D%E7%8E%B0/" style="font-size: 0.88rem;">模型复现<sup>8</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem; font-weight: 500; color: var(--anzhiyu-lighttext)">深度学习<sup>15</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">网页前端<sup>4</sup></a><a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 0.88rem;">考研<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E5%85%B3%E7%B3%BB%E6%8E%A2%E6%B5%8B/" style="font-size: 0.88rem;">视觉关系探测<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E9%97%AE%E7%AD%94/" style="font-size: 0.88rem;">视觉问答<sup>1</sup></a><a href="/tags/%E8%A7%86%E9%A2%91%E9%97%AE%E7%AD%94/" style="font-size: 0.88rem;">视频问答<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/" style="font-size: 0.88rem;">计算机视觉<sup>12</sup></a><a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 0.88rem;">论文<sup>4</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="60198" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/playlist&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("04/01/2021 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      img.src = "https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/09/07/20230907103822-7fe708.svg";
      img.title = "下班了就该开开心心的玩耍，嘿嘿~";
      img.alt = "下班了就该开开心心的玩耍，嘿嘿~";

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.cbd.int/katex@0.16.0/dist/katex.min.css"><script src="https://cdn.cbd.int/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    anzhiyu.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-api-pearl.vercel.app',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.18/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-api-pearl.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-api-pearl.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.18/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>