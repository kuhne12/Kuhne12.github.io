<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Pandas基础教程 | Kuhne</title><meta name="keywords" content="Python,工具"><meta name="author" content="Kuhne"><meta name="copyright" content="Kuhne"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Pandas基础教程"><meta name="application-name" content="Pandas基础教程"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Pandas基础教程"><meta property="og:url" content="https://kuhne.gitee.io/kuhne.gitee.io/posts/da1a8524.html"><meta property="og:site_name" content="Kuhne"><meta property="og:description" content="记录一些Pandas的常用方法"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/Pandas_Logo.jpeg"><meta property="article:author" content="Kuhne"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/Pandas_Logo.jpeg"><meta name="description" content="记录一些Pandas的常用方法"><link rel="shortcut icon" href="/img/head2.png"><link rel="canonical" href="https://kuhne.gitee.io/kuhne.gitee.io/posts/da1a8524"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: {"enable":true,"ck":"3Fpd8lKaw5wGj1Fj","LingQueMonitorID":null},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋，中午要好好休息一下～","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo-api-pearl.vercel.app',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":""},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🐟 上班摸鱼佼佼者"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Kuhne","link":"链接: ","source":"来源: Kuhne","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Kuhne',
  title: 'Pandas基础教程',
  postAI: '',
  pageFillDescription: 'Pandas 基础, 第一部分 Pandas介绍, 第二部分 数据结构, 第一节 Series（一维）, 第二节 DataFrame（二维）, 第三部分 数据查看, 第四部分 数据 I/O, 第一节 csv, 第二节 Excel, 第三节 SQL, 第五部分 数据选取, 第一节 字段数据, 第二节 行的获取, 第三节 具体数值获取, 第四节 条件查询, 第五节 数据赋值, 第六部分  数据集成, 第一节 concat 数据串联, 第二节 插入, 第三节 SQL风格合并（Join）, 第七部分 数据清洗, 第八部分 数据转换, 第一节 轴和元素的替换, 第二节 map Series 元素改变, 第三节 apply Series 和 DataFrame元素改变, 第四节 transform(空), 第五节 重排、随即抽样、哑变量(空), 第九部分 数据重塑, 第十部分 数学和统计方法, 第一节 简单统计指标, 第二节 索引标签、位置获取, 第三节 更多的统计指标, 第四节 高级统计函数, 第十一部分 数据排序, 第十二部分 分箱操作, 第十三部分 分组聚合, 第一节 分组, 第二节 分组聚合, 第三节 分组聚合apply、transform, 第四节 分组聚合agg, 第五节 透视表, 第室四部分 时间序列, 第一节 时间戳操作, 第二节 时间戳索引, 第三节 时间序列常用方法, 第四节 时区表, 第十五部分 数据可视化基础第一部分介绍在数据处理和准备方面一直做得很好但在数据分析和建模方面就差一些帮助填补了这一空白使您能够在中执行整个数据分析工作流程而不必切换到更特定于领域的语言如与出色的工具包和其他库相结合中用于进行数据分析的环境在性能生产率和协作能力方面都是卓越的是的核心数据分析支持库提供了快速灵活明确的数据结构旨在简单直观地处理关系型标记型数据是进行数据分析的必备高级工具的主要数据结构是一维数据与二维数据这两种数据结构足以处理金融统计社会科学工程等领域里的大多数案例处理数据一般分为几个阶段数据整理与清洗数据分析与建模数据可视化与制表是处理数据的理想工具第二部分数据结构第一节一维用列表生成时默认自动生成整数索引也可以指定索引创建一维索引默认情况创建输出一维与的不同点是存在一一对应的索引第二节二维是由多种类型的列构成的二维标签数据结构类似于表或对象构成的字典默认创建输出指定行列名创建输出字典形式创建字典中的作为列索引表示数据输出第三部分数据查看查看的常用属性和的概览和统计信息显示头部行默认个输出显示末尾行默认个查看形状行数和列数查看数据类型修改数据类型输出获得行索引输出获得列索引输出对象值二维数组输出查看数值型列的汇总统计计数平均值标准差最小值四分位数最大值查看列索引数据类型非空计数和内存信息输出第四部分数据第一节保存操作化工生物教师士兵参数解释参数一保存路径分隔符是否保存表头是否保存索引输出结果读取操作参数解释参数一指定文件路径指定分隔符指定列索引指定行索引输出结果化工生物教师士兵第二节保存操作化工生物教师士兵参数解释参数一指定保存路径中工作表的名字是否保存列索引是否保存行索引输出结果读取操作参数解释参数一指定文件路径读取哪一个中工作表默认第一个也可以写成字符串指定列索引指定行索引替换行索引输出结果多表保存操作表薪资表化工生物教师士兵表成绩表多表保存读取数据输出结果第三节第五部分数据选取第一节字段数据列的获取得到的两种方式得到得到多列数据第二节行的获取行的获取获取两行数字方式获取行第三节具体数值获取获取具体数值先行后列切片第四节条件查询条件查询第五节数据赋值添加一列数据修改批量修改多个数据使用条件时的注意点创建了一个副本对其修改不会影响运来的还是原来的对其修改会影响运来的第六部分数据集成提供了多种将对象组合在一起的功能第一节数据串联创建三个表格数据表合并进行行合并列合并合并时列增加第二节插入生成数据表插入一列指定字段后添加一列第三节风格合并数据集的合并或连接运算是通过一个或者多个键将数据链接起来的这些运算是关系型数据库的核心操作的函数是数据集进行运算的主要切入点生成数据表加入平均分列结果是一个转化为表合并没有共同的字段但是有相同的索引第二种方式第三种方式第七部分数据清洗判断是否有重复数据删除重复数据判断是否为空数据删除空数据填充空数据方法内部传入填充内容指定行删除数据删除指定行不修改原来数据删除指定行修改原来数据指定列删除数据直接删除一列删除指定列不修改原来数据删除指定列修改原来数据函数使用选择指定列正则表达式选择列选择列标签末尾是的列模糊匹配查询选择行标签包含的行异常值处理列处理创建正态分布数据异常数据判断条件标准差获取每一列的异常值输出所有包含异常数据的行异常值处理行处理表示计算每一行默认为只要有一个为返回第八部分数据转换第一节轴和元素的替换重命名行列索引轴索引创建数据表将元素改为重命名行列索引轴索隐元素的替换替换单一特定值为特定值替换多个特定值为特定值根据字典键值对进行替换指定特定的列修改特定的值指定列为的数修改为第二节元素改变批量修改元素专有输出修改指定的值未指定的值置为自定义函数可以给方法传入函数输出隐式函数映射表达式第三节和元素改变自定义函数修改列将生成的列插入原数据表多行转换修改以上代码为循环结构第四节空第五节重排随即抽样哑变量空第九部分数据重塑数据表转转置转置输出多层索引期中期末输出期中期末期中期末期中期末期中期末期中期末期中期末期中期末期中期末期中期末期中期末数据重塑及默认情况下调整最里层的索引通过参数调整默认为表示最里层行索引变列索引输出期中期末期中期末期中期末列索引变行索引输出期中期末期中期末多层索引运算设置表示计算每一行的总和输出期中期末期中期末期中期末设置计算每个同学期中期末的总分输出设置计算所有同学的平均分输出期中期末多层索引取值记得先列后行期中第十部分数学和统计方法对象拥有一组常用的数学和统计方法它们属于汇总统计对汇总计算获取或者对行列汇总计算返回一个第一节简单统计指标统计值为非的数期中期末输出轴最大值即每一列的最大值输出轴最小值即每一列的最大值输出中位数求和轴平均值即每一行的平均值分位数查看数值型列的汇总统计计数平均值标准差最小值四分位数最大值第二节索引标签位置获取返回最小值位置返回最大值位置返回最大值的索引标签输出期中期中期中返回最小值的索引标签期末期末期中第三节更多的统计指标统计元素出现次数去重累加累乘标准差方差累计最小值累计最大值计算差分计算百分比变化第四节高级统计函数属性的协方差和的协方差所有属性相关性系数单一属性相关性系数第十一部分数据排序索引名排序按照每一行的索引名排序表示行表示列是否升序排序属性值排序按照指定列名进行排序指定排序的列名是否升序返回属性大或者小的值根据属性排序返回最大个数据第一个参数指定返回的个数指定比较的列名根据属性排序返回最小个数据第十二部分分箱操作分箱操作就是将连续数据转换为分类对应物的过程比如将连续的身高数据划分为矮中高分箱操作分为等距分箱和等频分箱分箱操作也叫面元划分或者离散化等宽分箱输出指定宽度分箱参数一指定分箱的数据分箱断点是否左闭右开分箱后的分类标签不及格中等良好优秀统计不同值的个数输出中等中等中等良好良好不及格不及格优秀不及格良好等频分箱参数一指定分箱的数据分类数分箱后的分类标签差中良优第十三部分分组聚合第一节分组创建初始数据进行性别映射男女单分组分组依据分组内容不同性别同学的和成绩单分组组名数据多分组不同班级性别同学的成绩多分组组名数据对列进行分组列名分组内容不同班级的成绩单分组组名数据多分组组名数据按数据类型进行分组组名数据通过字典进行分组组名数据第二节分组聚合按照性别进行分组其他列的均值进行聚合不同性别同学的平均分输出女男按照班级和性别进行分组和的最大值进行聚合输出女男女男按照班级和性别进行分组计数进行聚合输出女男女男按照班级和性别进行分组基本描述性统计进行聚合输出女男女男第三节分组聚合返回三类汇总情况不带括号的参数是指传入的是整个方法输出女男女男女男女男返回全部元素输出第四节分组聚合分组组合可以对不同的列做不同的操作分组后调用应用多种统计汇总分别计算的最大值最小值数量和不带括号的参数是指传入的是整个方法输出女男女男女男女男女男分组后不同属性应用多种不同统计汇总分别对和的不同属性做统计最大值最小值计数中位数第五节透视表透视表也是一种分组聚合运算要透视分组的值纵坐标分组透视指标横坐标聚合运算最大值最小值中位数最小值平均值计数输出中位数最小值最大值平均值最小值计数女男女男女男第室四部分时间序列第一节时间戳操作时刻数据输出批量时刻数据第一个参数开始时间时间数量每个时间的间隔输出时期数据表示频率代表月份输出批量时期数据输出时间戳索引批量时刻数据输出转换方法批量字符串转换时间输出数字转时间指定单位代表秒输出世界标准时间转换东八区天后日期第二节时间戳索引创建时间戳索引输出日期访问传入日期输出传入年月输出传入年输出日期切片输出时间戳索引属性获取年获取星期获取一年中的第几个星期输出第三节时间序列常用方法在做时间序列相关的工作时经常要对时间做一些移动滞后频率转换采样等相关操作我们来看下这些操作如何使用创建数据时间移动数据后移数据前移日期移动天移动月移动频率转换天变周天变月天变小时又少变多为填充值重采样表示根据日期维度进行数据聚合可以按照分钟小时工作日周月年等来作为日期维度以周为单位进行汇总以季度为单位进行汇总重采样第四节时区表时区表示需要引入包常用时区常用时区输出时区表示输出第十五部分数据可视化线性图纵坐标横坐标具体单元柱状图横纵纵坐标数据单元是否可堆叠饼图组个数据具体单元饼图个数多张图散点图创建组个数据确定的关系绘制散点图绘制散点图设置散点的大小面积图组个数据四个单元是否可堆叠箱式图组个数据个单元直方图设置透明度是否可堆叠子视图绘制',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-06 11:42:01',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Kuhne" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://kuhne.gitee.io/kuhne.gitee.io/img/head.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="/null" title="暂无"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="暂无"/><span class="back-menu-item-text">暂无</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Kuhne</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=883682303&amp;server=netease&amp;type=playlist"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/essay/"><span> 闲言碎语</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/2022CVPR/" style="font-size: 1.05rem;">2022CVPR<sup>2</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/Kaggle/" style="font-size: 1.05rem;">Kaggle<sup>2</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/PyTorch/" style="font-size: 1.05rem;">PyTorch<sup>9</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>6</sup></a><a href="/tags/Pytorch/" style="font-size: 1.05rem;">Pytorch<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 1.05rem;">SpringCloud<sup>9</sup></a><a href="/tags/Vue/" style="font-size: 1.05rem;">Vue<sup>3</sup></a><a href="/tags/pycharm/" style="font-size: 1.05rem;">pycharm<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 1.05rem;">人工智能<sup>21</sup></a><a href="/tags/%E4%BD%9C%E4%B8%9A/" style="font-size: 1.05rem;">作业<sup>8</sup></a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 1.05rem;">加密<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 1.05rem;">后端<sup>2</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">基础<sup>12</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">工具<sup>3</sup></a><a href="/tags/%E5%BD%92%E7%BA%B3/" style="font-size: 1.05rem;">归纳<sup>3</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">教程<sup>10</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.05rem;">服务器<sup>1</sup></a><a href="/tags/%E6%9C%AA%E5%AE%8C%E6%88%90/" style="font-size: 1.05rem;">未完成<sup>1</sup></a><a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">机器学习<sup>21</sup></a><a href="/tags/%E6%A8%A1%E5%9E%8B%E5%A4%8D%E7%8E%B0/" style="font-size: 1.05rem;">模型复现<sup>8</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">深度学习<sup>15</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">网页前端<sup>4</sup></a><a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 1.05rem;">考研<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E5%85%B3%E7%B3%BB%E6%8E%A2%E6%B5%8B/" style="font-size: 1.05rem;">视觉关系探测<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E9%97%AE%E7%AD%94/" style="font-size: 1.05rem;">视觉问答<sup>1</sup></a><a href="/tags/%E8%A7%86%E9%A2%91%E9%97%AE%E7%AD%94/" style="font-size: 1.05rem;">视频问答<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/" style="font-size: 1.05rem;">计算机视觉<sup>12</sup></a><a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 1.05rem;">论文<sup>4</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">16</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Python/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Python</span></a><a class="article-meta__tags" href="/tags/%E5%B7%A5%E5%85%B7/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>工具</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Pandas基础教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-05-02T04:43:00.000Z" title="发表于 2022-05-02 12:43:00">2022-05-02</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-09-06T03:42:01.672Z" title="更新于 2023-09-06 11:42:01">2023-09-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">8.1k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>38分钟</span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为杭州"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>杭州</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/da1a8524.html#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/Pandas_Logo.jpeg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://kuhne.gitee.io/kuhne.gitee.io/posts/da1a8524.html"><header><a href="/tags/Python/" tabindex="-1" itemprop="url">Python</a><a href="/tags/%E5%B7%A5%E5%85%B7/" tabindex="-1" itemprop="url">工具</a><h1 id="CrawlerTitle" itemprop="name headline">Pandas基础教程</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Kuhne</span><time itemprop="dateCreated datePublished" datetime="2022-05-02T04:43:00.000Z" title="发表于 2022-05-02 12:43:00">2022-05-02</time><time itemprop="dateCreated datePublished" datetime="2023-09-06T03:42:01.672Z" title="更新于 2023-09-06 11:42:01">2023-09-06</time></header><ul>
<li>
<h1>Pandas 基础</h1>
<h2 id="第一部分-Pandas介绍">第一部分 Pandas介绍</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220430191417745-1651550716066.png" alt="Pandas"></p>
<ul>
<li>Python在数据处理和准备方面一直做得很好，但在<strong>数据分析</strong>和<strong>建模</strong>方面就差一些。pandas帮助填补了这一空白，使您能够在Python中执行整个数据分析工作流程，而不必切换到更特定于领域的语 言，如R。</li>
<li>与出色的 jupyter工具包和其他库相结合，Python中用于进行数据分析的环境在性能、生产率和协作能力方面都是卓越的。</li>
<li>pandas是 Python 的核心数据分析支持库，提供了快速、灵活、明确的数据结构，旨在简单、直观地处理关系型、标记型数据。pandas是Python进行数据分析的必备高级工具。</li>
<li>pandas的主要数据结构是 <strong>Series</strong>(一维数据)与 <strong>DataFrame</strong> (二维数据)，这两种数据结构足以处理金融、统计、社会科学、工程等领域里的大多数案例</li>
<li>处理数据一般分为几个阶段：<strong>数据整理与清洗</strong>、<strong>数据分析与建模</strong>、<strong>数据可视化与制表</strong>，Pandas 是<strong>处理数据</strong>的理想工具。</li>
</ul>
<h2 id="第二部分-数据结构">第二部分 数据结构</h2>
<h3 id="第一节-Series（一维）">第一节 Series（一维）</h3>
</li>
</ul>
<p>用列表生成 Series时，Pandas 默认自动生成整数索引，也可以指定索引</p>
<ul>
<li>
<p>创建一维索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">s = pd.Series(data=[<span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>], index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认情况创建</span></span><br><span class="line">s2 = pd.Series([<span class="number">3</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>])</span><br><span class="line"><span class="built_in">print</span>(s2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">a    <span class="number">0</span></span><br><span class="line">b    <span class="number">3</span></span><br><span class="line">c    <span class="number">5</span></span><br><span class="line">d    <span class="number">7</span></span><br><span class="line">dtype: int64</span><br><span class="line"><span class="number">0</span>    <span class="number">3</span></span><br><span class="line"><span class="number">1</span>    <span class="number">5</span></span><br><span class="line"><span class="number">2</span>    <span class="number">2</span></span><br><span class="line"><span class="number">3</span>    <span class="number">6</span></span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure>
<p>一维 Series 与 Numpy 的不同点是，Series 存在一一对应的索引</p>
</li>
</ul>
<h3 id="第二节-DataFrame（二维）">第二节 DataFrame（二维）</h3>
<p>DataFrame是由多种类型的列构成的二维标签数据结构，类似于 Excel 、SQL 表，或 Series 对象构成的字典。</p>
<ul>
<li>
<p>默认创建DataFrame</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">frame = pd.DataFrame(data=np.random.randint(<span class="number">0</span>,<span class="number">20</span>,size=(<span class="number">5</span>,<span class="number">3</span>)))</span><br><span class="line"><span class="built_in">print</span>(frame)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line"><span class="number">0</span>   <span class="number">5</span>  <span class="number">17</span>  <span class="number">13</span></span><br><span class="line"><span class="number">1</span>  <span class="number">14</span>   <span class="number">7</span>   <span class="number">6</span></span><br><span class="line"><span class="number">2</span>  <span class="number">14</span>   <span class="number">5</span>   <span class="number">9</span></span><br><span class="line"><span class="number">3</span>   <span class="number">3</span>   <span class="number">4</span>   <span class="number">8</span></span><br><span class="line"><span class="number">4</span>  <span class="number">19</span>  <span class="number">10</span>  <span class="number">10</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>指定行列名创建DataFrame</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">frame = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">20</span>, size=(<span class="number">5</span>, <span class="number">3</span>)),</span><br><span class="line">                     columns=[<span class="string">&#x27;One&#x27;</span>, <span class="string">&#x27;Two&#x27;</span>, <span class="string">&#x27;Three&#x27;</span>], index=[<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>])</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">   One  Two  Three</span><br><span class="line">A   <span class="number">15</span>   <span class="number">14</span>      <span class="number">8</span></span><br><span class="line">B   <span class="number">13</span>   <span class="number">10</span>     <span class="number">12</span></span><br><span class="line">C    <span class="number">8</span>   <span class="number">10</span>     <span class="number">13</span></span><br><span class="line">D    <span class="number">3</span>   <span class="number">16</span>      <span class="number">1</span></span><br><span class="line">E   <span class="number">15</span>    <span class="number">9</span>     <span class="number">16</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>字典形式创建DataFrame，字典中的 key 作为列索引，value 表示数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">frame = pd.DataFrame(data=&#123;<span class="string">&#x27;Age&#x27;</span>: np.random.randint(<span class="number">10</span>, <span class="number">20</span>, size=<span class="number">5</span>),</span><br><span class="line">                           <span class="string">&#x27;Python&#x27;</span>: np.random.randint(<span class="number">10</span>, <span class="number">20</span>, size=<span class="number">5</span>),</span><br><span class="line">                           <span class="string">&#x27;Math&#x27;</span>: np.random.randint(<span class="number">10</span>, <span class="number">20</span>, size=<span class="number">5</span>)&#125;,</span><br><span class="line">                     index=<span class="built_in">list</span>(<span class="string">&quot;ABCDE&quot;</span>))</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">   Age  Python  Math</span><br><span class="line">A   <span class="number">17</span>      <span class="number">13</span>    <span class="number">18</span></span><br><span class="line">B   <span class="number">11</span>      <span class="number">19</span>    <span class="number">10</span></span><br><span class="line">C   <span class="number">11</span>      <span class="number">17</span>    <span class="number">18</span></span><br><span class="line">D   <span class="number">14</span>      <span class="number">11</span>    <span class="number">15</span></span><br><span class="line">E   <span class="number">19</span>      <span class="number">17</span>    <span class="number">17</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第三部分-数据查看">第三部分 数据查看</h2>
<p>查看DataFrame的常用属性和DataFrame的概览和统计信息</p>
<ul>
<li>
<p><code>df.head(10)</code> 显示头部10行，默认5个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">20</span>, size=(<span class="number">150</span>, <span class="number">3</span>)),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;En&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df.head(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">   Python  En  Math</span><br><span class="line"><span class="number">0</span>      <span class="number">11</span>  <span class="number">11</span>     <span class="number">2</span></span><br><span class="line"><span class="number">1</span>       <span class="number">4</span>  <span class="number">13</span>    <span class="number">18</span></span><br><span class="line"><span class="number">2</span>       <span class="number">9</span>  <span class="number">19</span>    <span class="number">14</span></span><br><span class="line"><span class="number">3</span>       <span class="number">4</span>   <span class="number">0</span>     <span class="number">7</span></span><br><span class="line"><span class="number">4</span>      <span class="number">14</span>  <span class="number">19</span>     <span class="number">4</span></span><br><span class="line"><span class="number">5</span>       <span class="number">1</span>  <span class="number">11</span>    <span class="number">10</span></span><br><span class="line"><span class="number">6</span>       <span class="number">9</span>   <span class="number">3</span>     <span class="number">8</span></span><br><span class="line"><span class="number">7</span>      <span class="number">19</span>   <span class="number">0</span>     <span class="number">2</span></span><br><span class="line"><span class="number">8</span>       <span class="number">0</span>  <span class="number">18</span>     <span class="number">1</span></span><br><span class="line"><span class="number">9</span>      <span class="number">18</span>   <span class="number">4</span>    <span class="number">17</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.tail(10)</code> 显示末尾10行，默认5个</p>
</li>
<li>
<p><code>df.shape</code>  查看形状，行数和列数</p>
</li>
<li>
<p><code>df.dtypes</code> 查看数据类型</p>
</li>
<li>
<p><code>df.astype()</code> 修改数据类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;Python&#x27;</span>] = df[<span class="string">&#x27;Python&#x27;</span>].astype(np.int64)</span><br><span class="line"><span class="built_in">print</span>(df.dtypes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">Python    int64</span><br><span class="line">En        int32</span><br><span class="line">Math      int32</span><br><span class="line">dtype: <span class="built_in">object</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.index()</code> 获得行索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.index)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">RangeIndex(start=<span class="number">0</span>, stop=<span class="number">150</span>, step=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.columns()</code> 获得列索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.columns)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">Index([<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;En&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>], dtype=<span class="string">&#x27;object&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.values()</code> 对象值，二维ndarray数组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.values)</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">[[ <span class="number">3</span> <span class="number">12</span> <span class="number">17</span>]</span><br><span class="line"> [ <span class="number">9</span> <span class="number">16</span> <span class="number">18</span>]</span><br><span class="line"> [ <span class="number">0</span>  <span class="number">7</span>  <span class="number">5</span>]</span><br><span class="line">	···</span><br><span class="line"> [ <span class="number">4</span>  <span class="number">6</span>  <span class="number">7</span>]</span><br><span class="line"> [ <span class="number">9</span>  <span class="number">3</span> <span class="number">14</span>]</span><br><span class="line"> [<span class="number">11</span> <span class="number">17</span> <span class="number">15</span>]]</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.describe()</code> 查看数值型列的汇总统计，<strong>计数</strong>、<strong>平均值</strong>、<strong>标准差</strong>、<strong>最小值</strong>、<strong>四分位数</strong>、<strong>最大值</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.describe())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">           Python          En        Math</span><br><span class="line">count  <span class="number">150.000000</span>  <span class="number">150.000000</span>  <span class="number">150.000000</span></span><br><span class="line">mean     <span class="number">9.333333</span>    <span class="number">9.526667</span>    <span class="number">8.713333</span></span><br><span class="line">std      <span class="number">5.588419</span>    <span class="number">5.904948</span>    <span class="number">5.314709</span></span><br><span class="line"><span class="built_in">min</span>      <span class="number">0.000000</span>    <span class="number">0.000000</span>    <span class="number">0.000000</span></span><br><span class="line"><span class="number">25</span>%      <span class="number">4.000000</span>    <span class="number">4.000000</span>    <span class="number">4.000000</span></span><br><span class="line"><span class="number">50</span>%     <span class="number">10.000000</span>    <span class="number">9.000000</span>    <span class="number">9.000000</span></span><br><span class="line"><span class="number">75</span>%     <span class="number">13.000000</span>   <span class="number">15.000000</span>   <span class="number">13.000000</span></span><br><span class="line"><span class="built_in">max</span>     <span class="number">19.000000</span>   <span class="number">19.000000</span>   <span class="number">19.000000</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.info()</code>  查看列<strong>索引</strong>、<strong>数据类型</strong>、<strong>非空计数</strong>和<strong>内存信息</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.info())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;pandas.core.frame.DataFrame&#x27;</span>&gt;</span><br><span class="line">RangeIndex: <span class="number">150</span> entries, <span class="number">0</span> to <span class="number">149</span></span><br><span class="line">Data columns (total <span class="number">3</span> columns):</span><br><span class="line"> <span class="comment">#   Column  Non-Null Count  Dtype</span></span><br><span class="line">---  ------  --------------  -----</span><br><span class="line"> <span class="number">0</span>   Python  <span class="number">150</span> non-null    int32</span><br><span class="line"> <span class="number">1</span>   En      <span class="number">150</span> non-null    int32</span><br><span class="line"> <span class="number">2</span>   Math    <span class="number">150</span> non-null    int32</span><br><span class="line">dtypes: int32(<span class="number">3</span>)</span><br><span class="line">memory usage: <span class="number">1.9</span> KB</span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第四部分-数据-I-O">第四部分 数据 I/O</h2>
<h3 id="第一节-csv">第一节 csv</h3>
<ul>
<li>
<p>保存操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">50</span>, size=(<span class="number">150</span>, <span class="number">5</span>)),</span><br><span class="line">                  columns=[<span class="string">&#x27;IT&#x27;</span>, <span class="string">&#x27;化工&#x27;</span>, <span class="string">&#x27;生物&#x27;</span>, <span class="string">&#x27;教师&#x27;</span>, <span class="string">&#x27;士兵&#x27;</span>])</span><br><span class="line">df.to_csv(<span class="string">&#x27;./data/data1.csv&#x27;</span>, sep=<span class="string">&#x27;\t&#x27;</span>, header=<span class="literal">True</span>, index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>参数解释：</p>
<ul>
<li>参数一：保存路径</li>
<li>sep：分隔符</li>
<li>header：是否保存表头</li>
<li>index：是否保存索引</li>
</ul>
</li>
<li>
<p>输出结果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220430202812356-1651550716067.png" alt="输出文件"></p>
</li>
</ul>
</li>
<li>
<p>读取操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">&#x27;./data/data1.csv&#x27;</span>,</span><br><span class="line">                   sep=<span class="string">&quot;\t&quot;</span>,</span><br><span class="line">                   header=[<span class="number">0</span>],</span><br><span class="line">                   index_col=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>参数解释</p>
<ul>
<li>参数一：指定文件路径</li>
<li>sep：指定分隔符</li>
<li>header：指定列索引</li>
<li>index_col：指定行索引</li>
</ul>
</li>
<li>
<p>输出结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">     IT  化工  生物  教师  士兵</span><br><span class="line"><span class="number">0</span>    <span class="number">46</span>  <span class="number">12</span>   <span class="number">2</span>  <span class="number">19</span>  <span class="number">34</span></span><br><span class="line"><span class="number">1</span>    <span class="number">10</span>  <span class="number">30</span>  <span class="number">26</span>  <span class="number">42</span>   <span class="number">6</span></span><br><span class="line"><span class="number">2</span>     <span class="number">1</span>  <span class="number">26</span>  <span class="number">37</span>  <span class="number">39</span>   <span class="number">2</span></span><br><span class="line"><span class="number">3</span>     <span class="number">0</span>  <span class="number">24</span>  <span class="number">14</span>  <span class="number">16</span>  <span class="number">41</span></span><br><span class="line"><span class="number">4</span>    <span class="number">37</span>  <span class="number">24</span>  <span class="number">21</span>  <span class="number">15</span>  <span class="number">21</span></span><br><span class="line">..   ..  ..  ..  ..  ..</span><br><span class="line"><span class="number">145</span>  <span class="number">22</span>  <span class="number">20</span>   <span class="number">5</span>  <span class="number">25</span>  <span class="number">27</span></span><br><span class="line"><span class="number">146</span>  <span class="number">10</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">10</span>  <span class="number">15</span></span><br><span class="line"><span class="number">147</span>  <span class="number">49</span>   <span class="number">1</span>  <span class="number">35</span>  <span class="number">17</span>  <span class="number">14</span></span><br><span class="line"><span class="number">148</span>  <span class="number">30</span>  <span class="number">15</span>  <span class="number">13</span>  <span class="number">47</span>  <span class="number">40</span></span><br><span class="line"><span class="number">149</span>  <span class="number">33</span>  <span class="number">17</span>  <span class="number">36</span>  <span class="number">22</span>  <span class="number">23</span></span><br><span class="line"></span><br><span class="line">[<span class="number">150</span> rows x <span class="number">5</span> columns]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="第二节-Excel">第二节 Excel</h3>
<ul>
<li>
<p>保存操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">50</span>, size=(<span class="number">150</span>, <span class="number">5</span>)),</span><br><span class="line">                  columns=[<span class="string">&#x27;IT&#x27;</span>, <span class="string">&#x27;化工&#x27;</span>, <span class="string">&#x27;生物&#x27;</span>, <span class="string">&#x27;教师&#x27;</span>, <span class="string">&#x27;士兵&#x27;</span>])</span><br><span class="line"></span><br><span class="line">df.to_excel(<span class="string">&#x27;./data/salary.xlsx&#x27;</span>,</span><br><span class="line">            sheet_name=<span class="string">&#x27;salary&#x27;</span>,</span><br><span class="line">            header=<span class="literal">True</span>,</span><br><span class="line">            index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>参数解释</p>
<ul>
<li>参数一：指定保存路径</li>
<li>sheet_name：Excel中工作表的名字</li>
<li>header：是否保存列索引</li>
<li>index：是否保存行索引</li>
</ul>
</li>
<li>
<p>输出结果</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220430211701806-1651550716067.png" alt="保存为Excel"></p>
</li>
</ul>
</li>
<li>
<p>读取操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_excel(<span class="string">&#x27;./data/salary.xlsx&#x27;</span>,</span><br><span class="line">                     sheet_name=<span class="number">0</span>,</span><br><span class="line">                     header=<span class="number">0</span>,</span><br><span class="line">                     names=<span class="built_in">list</span>(<span class="string">&#x27;ABCDE&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>参数解释：</p>
<ul>
<li>参数一：指定文件路径</li>
<li>sheet_name：读取哪一个Excel中工作表，默认第一个，也可以写成字符串</li>
<li>header：指定列索引</li>
<li>index_col：指定行索引</li>
<li>names：替换行索引</li>
</ul>
</li>
<li>
<p>输出结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">      A   B   C   D   E</span><br><span class="line"><span class="number">0</span>     <span class="number">0</span>  <span class="number">19</span>  <span class="number">44</span>  <span class="number">14</span>   <span class="number">1</span></span><br><span class="line"><span class="number">1</span>    <span class="number">24</span>   <span class="number">0</span>   <span class="number">4</span>  <span class="number">36</span>  <span class="number">26</span></span><br><span class="line"><span class="number">2</span>    <span class="number">32</span>  <span class="number">20</span>  <span class="number">34</span>  <span class="number">46</span>  <span class="number">36</span></span><br><span class="line"><span class="number">3</span>    <span class="number">47</span>  <span class="number">46</span>  <span class="number">20</span>  <span class="number">26</span>   <span class="number">2</span></span><br><span class="line"><span class="number">4</span>    <span class="number">28</span>  <span class="number">15</span>  <span class="number">11</span>   <span class="number">4</span>  <span class="number">13</span></span><br><span class="line">..   ..  ..  ..  ..  ..</span><br><span class="line"><span class="number">145</span>  <span class="number">28</span>  <span class="number">47</span>  <span class="number">15</span>  <span class="number">45</span>  <span class="number">39</span></span><br><span class="line"><span class="number">146</span>  <span class="number">23</span>   <span class="number">3</span>  <span class="number">42</span>  <span class="number">10</span>  <span class="number">47</span></span><br><span class="line"><span class="number">147</span>   <span class="number">8</span>   <span class="number">1</span>  <span class="number">16</span>  <span class="number">39</span>  <span class="number">38</span></span><br><span class="line"><span class="number">148</span>   <span class="number">5</span>  <span class="number">35</span>  <span class="number">39</span>  <span class="number">36</span>  <span class="number">23</span></span><br><span class="line"><span class="number">149</span>  <span class="number">14</span>  <span class="number">38</span>  <span class="number">24</span>  <span class="number">43</span>   <span class="number">5</span></span><br><span class="line"></span><br><span class="line">[<span class="number">150</span> rows x <span class="number">5</span> columns]</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>多表保存操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 表1，薪资表</span></span><br><span class="line">df1 = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">50</span>, size=(<span class="number">150</span>, <span class="number">5</span>)),</span><br><span class="line">                   columns=[<span class="string">&#x27;IT&#x27;</span>, <span class="string">&#x27;化工&#x27;</span>, <span class="string">&#x27;生物&#x27;</span>, <span class="string">&#x27;教师&#x27;</span>, <span class="string">&#x27;士兵&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 表2，成绩表</span></span><br><span class="line">df2 = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">100</span>, size=(<span class="number">150</span>, <span class="number">3</span>)),</span><br><span class="line">                   columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;En&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多表保存</span></span><br><span class="line"><span class="keyword">with</span> pd.ExcelWriter(<span class="string">&#x27;./data/salary.xlsx&#x27;</span>) <span class="keyword">as</span> whiter:</span><br><span class="line">    df1.to_excel(whiter, sheet_name=<span class="string">&#x27;salary&#x27;</span>, index=<span class="literal">False</span>)</span><br><span class="line">    df2.to_excel(whiter, sheet_name=<span class="string">&#x27;score&#x27;</span>, index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line">data = pd.read_excel(<span class="string">&#x27;./data/salary.xlsx&#x27;</span>, sheet_name=<span class="string">&#x27;score&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>输出结果</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220430213817387-1651550716067.png" alt="多表保存"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">     Python  En  Math</span><br><span class="line"><span class="number">0</span>        <span class="number">85</span>  <span class="number">20</span>    <span class="number">96</span></span><br><span class="line"><span class="number">1</span>        <span class="number">74</span>  <span class="number">28</span>     <span class="number">3</span></span><br><span class="line"><span class="number">2</span>         <span class="number">2</span>  <span class="number">16</span>    <span class="number">41</span></span><br><span class="line"><span class="number">3</span>        <span class="number">18</span>  <span class="number">33</span>    <span class="number">34</span></span><br><span class="line"><span class="number">4</span>        <span class="number">49</span>  <span class="number">12</span>    <span class="number">66</span></span><br><span class="line">..      ...  ..   ...</span><br><span class="line"><span class="number">145</span>      <span class="number">39</span>  <span class="number">55</span>     <span class="number">5</span></span><br><span class="line"><span class="number">146</span>      <span class="number">97</span>  <span class="number">67</span>    <span class="number">71</span></span><br><span class="line"><span class="number">147</span>      <span class="number">67</span>  <span class="number">14</span>    <span class="number">45</span></span><br><span class="line"><span class="number">148</span>      <span class="number">75</span>  <span class="number">12</span>     <span class="number">8</span></span><br><span class="line"><span class="number">149</span>      <span class="number">56</span>  <span class="number">71</span>    <span class="number">96</span></span><br><span class="line"></span><br><span class="line">[<span class="number">150</span> rows x <span class="number">3</span> columns]</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="第三节-SQL">第三节 SQL</h3>
<h2 id="第五部分-数据选取">第五部分 数据选取</h2>
<h3 id="第一节-字段数据">第一节 字段数据</h3>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">100</span>, size=(<span class="number">1000</span>, <span class="number">3</span>)),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;En&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列的获取</span></span><br><span class="line"><span class="comment"># 得到 Series 的两种方式</span></span><br><span class="line"><span class="built_in">print</span>(df[<span class="string">&#x27;Python&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(df.Python)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到dataFrame</span></span><br><span class="line"><span class="built_in">print</span>(df[[<span class="string">&#x27;Python&#x27;</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到多列数据</span></span><br><span class="line"><span class="built_in">print</span>(df[[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>]])</span><br></pre></td></tr></table></figure>
<h3 id="第二节-行的获取">第二节 行的获取</h3>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">df2 = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">100</span>, size=(<span class="number">5</span>, <span class="number">3</span>)),</span><br><span class="line">                   columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;En&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>],</span><br><span class="line">                   index=<span class="built_in">list</span>(<span class="string">&#x27;ABCDE&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 行的获取</span></span><br><span class="line"><span class="built_in">print</span>(df2.loc[<span class="string">&#x27;A&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取两行</span></span><br><span class="line"><span class="built_in">print</span>(df2.loc[[<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数字方式获取行</span></span><br><span class="line"><span class="built_in">print</span>(df2.iloc[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<h3 id="第三节-具体数值获取">第三节 具体数值获取</h3>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取具体数值,先行后列</span></span><br><span class="line"><span class="built_in">print</span>(df2[<span class="string">&#x27;Math&#x27;</span>][<span class="string">&#x27;B&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(df2.loc[<span class="string">&#x27;B&#x27;</span>][<span class="string">&#x27;Math&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(df2.loc[<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(df2.iloc[<span class="number">1</span>][<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(df2.iloc[<span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切片</span></span><br><span class="line"><span class="built_in">print</span>(df2.loc[<span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>:])</span><br><span class="line"><span class="built_in">print</span>(df2.iloc[<span class="number">0</span>:<span class="number">5</span>, <span class="number">0</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<h3 id="第四节-条件查询">第四节 条件查询</h3>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 条件查询</span></span><br><span class="line">cond = df[<span class="string">&#x27;Python&#x27;</span>] &gt; <span class="number">60</span></span><br><span class="line"><span class="built_in">print</span>(df[cond])</span><br><span class="line">cond2 = df[<span class="string">&#x27;Math&#x27;</span>] &gt; <span class="number">60</span></span><br><span class="line"><span class="built_in">print</span>(df[cond &amp; cond2])</span><br></pre></td></tr></table></figure>
<h3 id="第五节-数据赋值">第五节 数据赋值</h3>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">df3 = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">50</span>, size=(<span class="number">20</span>, <span class="number">3</span>)),</span><br><span class="line">                   columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;En&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加一列</span></span><br><span class="line">df3[<span class="string">&#x27;Phy&#x27;</span>] = np.random.randint(<span class="number">0</span>, <span class="number">50</span>, size=<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(df3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据修改</span></span><br><span class="line">df3[<span class="string">&#x27;Python&#x27;</span>] += <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(df3)</span><br><span class="line"></span><br><span class="line">df3[<span class="string">&#x27;Math&#x27;</span>][<span class="number">3</span>] = <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(df3[<span class="string">&#x27;Math&#x27;</span>][<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量修改多个数据</span></span><br><span class="line">df3.loc[[<span class="number">2</span>, <span class="number">3</span>], [<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;En&#x27;</span>]] = <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(df3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用条件时的注意点</span></span><br><span class="line">cond = df3[<span class="string">&#x27;Python&#x27;</span>] &lt; <span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df3[cond])  <span class="comment"># 创建了一个副本,对其修改不会影响运来的dataFrame</span></span><br><span class="line"><span class="built_in">print</span>(df3.loc[cond])  <span class="comment"># 还是原来的dataFrame，,对其修改会影响运来的dataFrame</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="第六部分-数据集成">第六部分  数据集成</h2>
<p>pandas 提供了多种将 Series、DataFrame 对象组合在一起的功能</p>
<h3 id="第一节-concat-数据串联">第一节 concat 数据串联</h3>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建三个表格数据</span></span><br><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">150</span>, size=(<span class="number">10</span>, <span class="number">3</span>)),</span><br><span class="line">                  index=<span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJ&#x27;</span>),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Tensorflow&#x27;</span>, <span class="string">&#x27;Pytorch&#x27;</span>])</span><br><span class="line"></span><br><span class="line">df2 = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">150</span>, size=(<span class="number">10</span>, <span class="number">3</span>)),</span><br><span class="line">                   index=<span class="built_in">list</span>(<span class="string">&#x27;KLMNOPQRST&#x27;</span>),</span><br><span class="line">                   columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Tensorflow&#x27;</span>, <span class="string">&#x27;Pytorch&#x27;</span>])</span><br><span class="line"></span><br><span class="line">df3 = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">100</span>, size=(<span class="number">10</span>, <span class="number">2</span>)),</span><br><span class="line">                   index=<span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJ&#x27;</span>),</span><br><span class="line">                   columns=[<span class="string">&#x27;En&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 表合并</span></span><br><span class="line"><span class="comment"># axis = 0 : 进行 行合并</span></span><br><span class="line">res = pd.concat([df, df2], axis=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列合并</span></span><br><span class="line"><span class="comment"># axis = 1 : 合并时列增加</span></span><br><span class="line">res2 = pd.concat([df, df3], axis=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(res2)</span><br></pre></td></tr></table></figure>
<h3 id="第二节-插入">第二节 插入</h3>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成数据表</span></span><br><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">150</span>, size=(<span class="number">10</span>, <span class="number">3</span>)),</span><br><span class="line">                  index=<span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJ&#x27;</span>),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Tensorflow&#x27;</span>, <span class="string">&#x27;Pytorch&#x27;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入一列</span></span><br><span class="line">df.insert(loc=<span class="number">2</span>, column=<span class="string">&#x27;Math&#x27;</span>, value=<span class="number">150</span>)</span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定字段后添加一列</span></span><br><span class="line">index = <span class="built_in">list</span>(df.columns).index(<span class="string">&#x27;Python&#x27;</span>) + <span class="number">1</span></span><br><span class="line">df.insert(loc=index, column=<span class="string">&#x27;En&#x27;</span>, value=np.random.randint(<span class="number">0</span>, <span class="number">150</span>, size=<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(df)</span><br></pre></td></tr></table></figure>
<h3 id="第三节-SQL风格合并（Join）">第三节 SQL风格合并（Join）</h3>
<p>数据集的合并（merge）或连接（join）运算是通过一个或者多个键将数据链接起来的。这些运算是关系型数据库的核心操作。pandas的<code>merge</code>函数是数据集进行join运算的主要切入点。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成数据表</span></span><br><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">150</span>, size=(<span class="number">10</span>, <span class="number">3</span>)),</span><br><span class="line">                  index=<span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJ&#x27;</span>),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Tensorflow&#x27;</span>, <span class="string">&#x27;Pytorch&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入平均分列</span></span><br><span class="line"><span class="comment"># 结果是一个Series</span></span><br><span class="line">s = df.mean(axis=<span class="number">1</span>).<span class="built_in">round</span>()</span><br><span class="line"><span class="comment"># 转化为DataFrame</span></span><br><span class="line">df2 = pd.DataFrame(s, columns=[<span class="string">&#x27;average&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 表合并，没有共同的字段，但是有相同的索引</span></span><br><span class="line">res = pd.merge(df,df2, left_index=<span class="literal">True</span>, right_index=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种方式</span></span><br><span class="line"><span class="comment"># df.insert(loc=3,colum=&#x27;average&#x27;,value=df2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三种方式</span></span><br><span class="line"><span class="comment"># df[&#x27;average&#x27;] = df.mean(axis=1).round</span></span><br></pre></td></tr></table></figure>
<h2 id="第七部分-数据清洗">第七部分 数据清洗</h2>
<ul>
<li>
<p>判断是否有重复数据 <code>df.duplicated()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=&#123;<span class="string">&#x27;color&#x27;</span>: [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="literal">None</span>, <span class="string">&#x27;red&#x27;</span>],<span class="string">&#x27;price&#x27;</span>: [<span class="number">10</span>, <span class="number">20</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">0</span>, np.NaN]&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df.duplicated())</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>删除重复数据 <code>df.drop_duplicates()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res = df.drop_duplicates()</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>判断是否为空数据 <code>df.isnull()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.isnull())</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>删除空数据 <code>df.dropna()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.dropna())</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>填充空数据 <code>df.fillna()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法内部传入填充内容</span></span><br><span class="line"><span class="built_in">print</span>(df.fillna(<span class="number">1024</span>))</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>指定行删除数据 <code>df.drop()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># axis=0：删除指定行，不修改原来数据！</span></span><br><span class="line">res = df.drop(labels=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>], axis=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除指定行，修改原来数据</span></span><br><span class="line">res = df.drop(labels=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>], axis=<span class="number">0</span>，inplase=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(df)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>指定列删除数据 <code>df.drop()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接删除一列</span></span><br><span class="line"><span class="keyword">del</span> df[<span class="string">&#x27;color&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># axis=1：删除指定列，不修改原来数据！</span></span><br><span class="line">res = df.drop(labels=[<span class="string">&#x27;price&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># axis=1：删除指定列，修改原来数据</span></span><br><span class="line">res = df.drop(labels=[<span class="string">&#x27;price&#x27;</span>], axis=<span class="number">1</span>，inplase=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>函数 <code>filter()</code> 使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 选择指定列</span></span><br><span class="line">res = df.<span class="built_in">filter</span>(items=[<span class="string">&#x27;color&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 正则表达式选择列，选择列标签末尾是 e 的列</span></span><br><span class="line">res = df.<span class="built_in">filter</span>(regex=<span class="string">&#x27;e$&#x27;</span>, axis=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模糊匹配查询，选择行标签包含 3 的行</span></span><br><span class="line">res = df.<span class="built_in">filter</span>(like=<span class="string">&#x27;3&#x27;</span>, axis=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>异常值处理 （列处理）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建正态分布数据</span></span><br><span class="line">df = pd.DataFrame(data=np.random.randn(<span class="number">10000</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 异常数据判断条件： x &gt; 3σ  （σ = 标准差）</span></span><br><span class="line">cond = df.<span class="built_in">abs</span>() &gt; <span class="number">3</span> * df.std()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取每一列的异常值</span></span><br><span class="line">cond0 = cond[<span class="number">0</span>]</span><br><span class="line">cond1 = cond[<span class="number">1</span>]</span><br><span class="line">cond2 = cond[<span class="number">2</span>]</span><br><span class="line">cond_ = cond0 | cond1 | cond2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出所有包含异常数据的行</span></span><br><span class="line"><span class="built_in">print</span>(df[cond_])</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>异常值处理 （行处理）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cond = df.<span class="built_in">abs</span>() &gt; <span class="number">3</span> * df.std()</span><br><span class="line"></span><br><span class="line"><span class="comment"># axis = 1 表示计算每一行，默认为 0</span></span><br><span class="line"><span class="comment"># 只要有一个为 True,返回True</span></span><br><span class="line">cond_ = cond.<span class="built_in">any</span>(axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df[cond_])</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第八部分-数据转换">第八部分 数据转换</h2>
<h3 id="第一节-轴和元素的替换">第一节 轴和元素的替换</h3>
<ul>
<li>
<p>重命名行列索引（轴索引）<code>df.rename(index=,colums=)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建数据表</span></span><br><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">10</span>, size=(<span class="number">10</span>, <span class="number">3</span>)),</span><br><span class="line">                  index=<span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJ&#x27;</span>),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Pytorch&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 [4,2] 元素改为 None</span></span><br><span class="line">df.iloc[<span class="number">4</span>, <span class="number">2</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重命名行列索引(轴索隐)</span></span><br><span class="line">res = df.rename(index=&#123;<span class="string">&#x27;A&#x27;</span>: <span class="string">&#x27;AA&#x27;</span>, <span class="string">&#x27;B&#x27;</span>: <span class="string">&#x27;CC&#x27;</span>&#125;, columns=&#123;<span class="string">&#x27;Python&#x27;</span>: <span class="string">&#x27;AI&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>元素的替换 <code>dp.replace()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 替换单一特定值为特定值</span></span><br><span class="line">res = df.replace(<span class="number">5</span>,<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换多个特定值为特定值</span></span><br><span class="line">res = df.replace([<span class="number">0</span>, <span class="number">7</span>], <span class="number">2048</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据字典键值对进行替换</span></span><br><span class="line">res = df.replace(&#123;<span class="number">0</span>: <span class="number">512</span>, np.nan: <span class="number">2048</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定特定的列修改特定的值，指定 Python 列为 2 的数，修改为1024</span></span><br><span class="line">res = df.replace(&#123;<span class="string">&#x27;Python&#x27;</span>: <span class="number">2</span>&#125;, <span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第二节-map-Series-元素改变">第二节 map Series 元素改变</h3>
<ul>
<li>
<p>map 批量修改元素  Series 专有</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">res = df[<span class="string">&#x27;Python&#x27;</span>].<span class="built_in">map</span>(&#123;<span class="number">1</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="number">5</span>: <span class="string">&#x27;world&#x27;</span>, np.nan: <span class="string">&#x27;AI&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出，修改指定的值，未指定的值置为NaN</span></span><br><span class="line">A      NaN</span><br><span class="line">B      NaN</span><br><span class="line">C    Hello</span><br><span class="line">D      NaN</span><br><span class="line">E    world</span><br><span class="line">F      NaN</span><br><span class="line">G      NaN</span><br><span class="line">H      NaN</span><br><span class="line">I    world</span><br><span class="line">J    world</span><br><span class="line">Name: Python, dtype: <span class="built_in">object</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>自定义函数，可以给 <code>map()</code> 方法传入函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">convert</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> x == <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;World&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> x == np.nan:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;AI&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">res = df[<span class="string">&#x27;Python&#x27;</span>].<span class="built_in">map</span>(convert)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">A        <span class="number">4</span></span><br><span class="line">B    World</span><br><span class="line">C        <span class="number">4</span></span><br><span class="line">D        <span class="number">2</span></span><br><span class="line">E        <span class="number">2</span></span><br><span class="line">F    Hello</span><br><span class="line">G    Hello</span><br><span class="line">H        <span class="number">3</span></span><br><span class="line">I        <span class="number">4</span></span><br><span class="line">J        <span class="number">3</span></span><br><span class="line">Name: Python, dtype: <span class="built_in">object</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>隐式函数映射 (lambda表达式)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res = df[<span class="string">&#x27;Python&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> x: <span class="literal">True</span> <span class="keyword">if</span> x &gt;= <span class="number">5</span> <span class="keyword">else</span> <span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(res) </span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第三节-apply-Series-和-DataFrame元素改变">第三节 apply Series 和 DataFrame元素改变</h3>
<ul>
<li>
<p>自定义函数修改列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">convert</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x &lt; <span class="number">60</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;F&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="number">60</span> &lt;= x &lt; <span class="number">70</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;D&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="number">70</span> &lt;= x &lt; <span class="number">80</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;C&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="number">80</span> &lt;= x &lt; <span class="number">90</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;B&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="number">90</span> &lt;= x &lt;= <span class="number">100</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;A&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">res = df[<span class="string">&#x27;Python&#x27;</span>].apply(convert)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将生成的列插入原数据表</span></span><br><span class="line">index = <span class="built_in">list</span>(df.columns).index(<span class="string">&#x27;Python&#x27;</span>)+<span class="number">1</span></span><br><span class="line">df.insert(loc=index, column=<span class="string">&#x27;Python Degree&#x27;</span>, value=res)</span><br><span class="line"><span class="built_in">print</span>(df)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>多行转换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改以上代码为循环结构</span></span><br><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> df.columns:</span><br><span class="line">    res = df[col].apply(convert)</span><br><span class="line">    index = <span class="built_in">list</span>(df.columns).index(col) + <span class="number">1</span></span><br><span class="line">    df.insert(loc=index, column=col + <span class="string">&#x27;Degree&#x27;</span>, value=res)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第四节-transform-空">第四节 transform(空)</h3>
<h3 id="第五节-重排、随即抽样、哑变量-空">第五节 重排、随即抽样、哑变量(空)</h3>
<h2 id="第九部分-数据重塑">第九部分 数据重塑</h2>
<ul>
<li>
<p>数据表转转置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>,<span class="number">100</span>,size=(<span class="number">10</span>,<span class="number">3</span>)),</span><br><span class="line">                  index=<span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJ&#x27;</span>),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>,<span class="string">&#x27;Math&#x27;</span>,<span class="string">&#x27;En&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转置</span></span><br><span class="line"><span class="built_in">print</span>(df.T)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">         A   B   C   D   E   F   G   H   I   J</span><br><span class="line">Python   <span class="number">9</span>  <span class="number">47</span>  <span class="number">43</span>  <span class="number">93</span>  <span class="number">52</span>  <span class="number">10</span>  <span class="number">43</span>  <span class="number">42</span>  <span class="number">89</span>  <span class="number">94</span></span><br><span class="line">Math    <span class="number">30</span>  <span class="number">88</span>  <span class="number">28</span>  <span class="number">23</span>  <span class="number">63</span>   <span class="number">4</span>   <span class="number">7</span>   <span class="number">4</span>  <span class="number">16</span>  <span class="number">79</span></span><br><span class="line">En      <span class="number">62</span>  <span class="number">54</span>  <span class="number">90</span>  <span class="number">48</span>  <span class="number">61</span>  <span class="number">28</span>  <span class="number">16</span>  <span class="number">37</span>  <span class="number">23</span>  <span class="number">77</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>多层索引 <code>pd.MultiIndex.from_product(List)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">100</span>, size=(<span class="number">20</span>, <span class="number">3</span>)),</span><br><span class="line">                  index=pd.MultiIndex.from_product([<span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJ&#x27;</span>), [<span class="string">&#x27;期中&#x27;</span>, <span class="string">&#x27;期末&#x27;</span>]]),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>, <span class="string">&#x27;En&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">      Python  Math  En</span><br><span class="line">A 期中       <span class="number">6</span>    <span class="number">47</span>  <span class="number">48</span></span><br><span class="line">  期末      <span class="number">81</span>    <span class="number">30</span>  <span class="number">27</span></span><br><span class="line">B 期中      <span class="number">21</span>    <span class="number">41</span>  <span class="number">92</span></span><br><span class="line">  期末      <span class="number">73</span>    <span class="number">88</span>  <span class="number">69</span></span><br><span class="line">C 期中      <span class="number">77</span>     <span class="number">9</span>  <span class="number">56</span></span><br><span class="line">  期末      <span class="number">76</span>    <span class="number">77</span>  <span class="number">76</span></span><br><span class="line">D 期中      <span class="number">97</span>    <span class="number">27</span>  <span class="number">83</span></span><br><span class="line">  期末      <span class="number">83</span>    <span class="number">80</span>  <span class="number">71</span></span><br><span class="line">E 期中      <span class="number">68</span>    <span class="number">65</span>  <span class="number">14</span></span><br><span class="line">  期末      <span class="number">31</span>    <span class="number">51</span>  <span class="number">78</span></span><br><span class="line">F 期中      <span class="number">91</span>    <span class="number">57</span>  <span class="number">59</span></span><br><span class="line">  期末       <span class="number">3</span>    <span class="number">91</span>  <span class="number">72</span></span><br><span class="line">G 期中      <span class="number">11</span>    <span class="number">66</span>  <span class="number">86</span></span><br><span class="line">  期末      <span class="number">85</span>    <span class="number">70</span>   <span class="number">4</span></span><br><span class="line">H 期中      <span class="number">73</span>    <span class="number">82</span>  <span class="number">30</span></span><br><span class="line">  期末       <span class="number">3</span>    <span class="number">92</span>  <span class="number">36</span></span><br><span class="line">I 期中      <span class="number">42</span>    <span class="number">26</span>  <span class="number">51</span></span><br><span class="line">  期末      <span class="number">70</span>    <span class="number">16</span>   <span class="number">5</span></span><br><span class="line">J 期中      <span class="number">14</span>    <span class="number">95</span>  <span class="number">80</span></span><br><span class="line">  期末      <span class="number">40</span>    <span class="number">11</span>   <span class="number">9</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>数据重塑 <code>df.unstack()</code> 及 <code>df.stack()</code> 默认情况下调整最里层的索引，通过参数 level 调整，默认为-1，表示最里层</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 行索引变列索引</span></span><br><span class="line"><span class="built_in">print</span>(df.unstack())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">  Python     Math      En    </span><br><span class="line">      期中  期末    期中  期末  期中  期末</span><br><span class="line">A      <span class="number">6</span>  <span class="number">81</span>   <span class="number">47</span>  <span class="number">30</span>  <span class="number">48</span>  <span class="number">27</span></span><br><span class="line">B     <span class="number">21</span>  <span class="number">73</span>   <span class="number">41</span>  <span class="number">88</span>  <span class="number">92</span>  <span class="number">69</span></span><br><span class="line">C     <span class="number">77</span>  <span class="number">76</span>    <span class="number">9</span>  <span class="number">77</span>  <span class="number">56</span>  <span class="number">76</span></span><br><span class="line">D     <span class="number">97</span>  <span class="number">83</span>   <span class="number">27</span>  <span class="number">80</span>  <span class="number">83</span>  <span class="number">71</span></span><br><span class="line">E     <span class="number">68</span>  <span class="number">31</span>   <span class="number">65</span>  <span class="number">51</span>  <span class="number">14</span>  <span class="number">78</span></span><br><span class="line">F     <span class="number">91</span>   <span class="number">3</span>   <span class="number">57</span>  <span class="number">91</span>  <span class="number">59</span>  <span class="number">72</span></span><br><span class="line">G     <span class="number">11</span>  <span class="number">85</span>   <span class="number">66</span>  <span class="number">70</span>  <span class="number">86</span>   <span class="number">4</span></span><br><span class="line">H     <span class="number">73</span>   <span class="number">3</span>   <span class="number">82</span>  <span class="number">92</span>  <span class="number">30</span>  <span class="number">36</span></span><br><span class="line">I     <span class="number">42</span>  <span class="number">70</span>   <span class="number">26</span>  <span class="number">16</span>  <span class="number">51</span>   <span class="number">5</span></span><br><span class="line">J     <span class="number">14</span>  <span class="number">40</span>   <span class="number">95</span>  <span class="number">11</span>  <span class="number">80</span>   <span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列索引变行索引</span></span><br><span class="line"><span class="built_in">print</span>(df.stack())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">A  期中  Python     <span class="number">7</span></span><br><span class="line">       Math      <span class="number">29</span></span><br><span class="line">       En        <span class="number">51</span></span><br><span class="line">   期末  Python    <span class="number">91</span></span><br><span class="line">       Math      <span class="number">31</span></span><br><span class="line">       En        <span class="number">59</span></span><br><span class="line">B  期中  Python    <span class="number">88</span></span><br><span class="line">       Math      <span class="number">90</span></span><br><span class="line">       En        <span class="number">97</span></span><br><span class="line">   期末  Python    <span class="number">79</span></span><br><span class="line">       Math      <span class="number">94</span></span><br><span class="line">       En        <span class="number">15</span></span><br><span class="line">···</span><br><span class="line">dtype: int32</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>多层索引运算</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置 axis = 1 表示计算每一行的总和</span></span><br><span class="line"><span class="built_in">print</span>(df.<span class="built_in">sum</span>(axis=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">A  期中    <span class="number">142</span></span><br><span class="line">   期末    <span class="number">226</span></span><br><span class="line">B  期中    <span class="number">141</span></span><br><span class="line">   期末    <span class="number">165</span></span><br><span class="line">C  期中    <span class="number">183</span></span><br><span class="line">   期末     <span class="number">73</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># 设置 level = 0，计算每个同学期中期末的总分</span></span><br><span class="line"><span class="built_in">print</span>(df.<span class="built_in">sum</span>(level=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">   Python  Math   En</span><br><span class="line">A      <span class="number">38</span>    <span class="number">66</span>   <span class="number">77</span></span><br><span class="line">B      <span class="number">83</span>   <span class="number">147</span>  <span class="number">127</span></span><br><span class="line">C      <span class="number">87</span>   <span class="number">146</span>  <span class="number">114</span></span><br><span class="line">D      <span class="number">71</span>    <span class="number">95</span>   <span class="number">36</span></span><br><span class="line">E      <span class="number">83</span>    <span class="number">88</span>  <span class="number">155</span></span><br><span class="line">F     <span class="number">145</span>    <span class="number">34</span>   <span class="number">27</span></span><br><span class="line">G     <span class="number">133</span>   <span class="number">149</span>   <span class="number">62</span></span><br><span class="line">H      <span class="number">91</span>    <span class="number">89</span>  <span class="number">117</span></span><br><span class="line">I      <span class="number">71</span>    <span class="number">98</span>   <span class="number">40</span></span><br><span class="line">J     <span class="number">170</span>    <span class="number">44</span>   <span class="number">64</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 level = 1，计算所有同学的平均分</span></span><br><span class="line"><span class="built_in">print</span>(df.mean(level=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"></span><br><span class="line">    Python  Math   En</span><br><span class="line">期中     <span class="number">553</span>   <span class="number">488</span>  <span class="number">437</span></span><br><span class="line">期末     <span class="number">419</span>   <span class="number">468</span>  <span class="number">382</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>多层索引取值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 记得先列后行</span></span><br><span class="line"><span class="built_in">print</span>(df[<span class="string">&#x27;Python&#x27;</span>][<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;期中&#x27;</span>])</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第十部分-数学和统计方法">第十部分 数学和统计方法</h2>
<p>pandas对象拥有一组常用的数学和统计方法。它们属于<strong>汇总统计</strong>，对Series汇总计算获取<strong>mean</strong>、<strong>max</strong>或者对DataFrame行、列<strong>汇总计算</strong>返回一个Series。</p>
<h3 id="第一节-简单统计指标">第一节 简单统计指标</h3>
<ul>
<li>
<p>统计值为非 NaN 的数 <code>df. count()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">100</span>, size=(<span class="number">20</span>, <span class="number">3</span>)),</span><br><span class="line">                  index=pd.MultiIndex.from_product([<span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJ&#x27;</span>), [<span class="string">&#x27;期中&#x27;</span>, <span class="string">&#x27;期末&#x27;</span>]]),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Math&#x27;</span>, <span class="string">&#x27;En&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df.count())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">Python    <span class="number">20</span></span><br><span class="line">Math      <span class="number">20</span></span><br><span class="line">En        <span class="number">20</span></span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>轴 0 最大值，即每一列的最大值 <code>df.max()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.<span class="built_in">max</span>(axis=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">Python    <span class="number">98</span></span><br><span class="line">Math      <span class="number">90</span></span><br><span class="line">En        <span class="number">90</span></span><br><span class="line">dtype: int32</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>轴 0 最小值，即每一列的最大值 <code>df.min()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.<span class="built_in">min</span>(axis=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">Python    <span class="number">2</span></span><br><span class="line">Math      <span class="number">1</span></span><br><span class="line">En        <span class="number">2</span></span><br><span class="line">dtype: int32</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>中位数，<code>df.meidan</code></p>
</li>
<li>
<p>求和，<code>df.sum()</code></p>
</li>
<li>
<p>轴 1 平均值，即每一行的平均值 <code>df.mean(axis=1)</code></p>
</li>
<li>
<p>分位数，<code>df.quantile(q = [0.2,0.4,0.8]) </code></p>
</li>
<li>
<p>查看数值型列的汇总统计,计数、平均值、标准差、最小值、四分位数、最大值：<code>df.describe</code></p>
</li>
</ul>
<h3 id="第二节-索引标签、位置获取">第二节 索引标签、位置获取</h3>
<ul>
<li>
<p><code>df['tag'].argmin()</code> 返回最小值位置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;Python&#x27;</span>].argmin()</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df['tag'].argmax()</code> 返回最大值位置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;Python&#x27;</span>].argmax()</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.idxmax()</code> 返回最大值的索引标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.idxmax())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">Python    (A, 期中)</span><br><span class="line">Math      (F, 期中)</span><br><span class="line">En        (E, 期中)</span><br><span class="line">dtype: <span class="built_in">object</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.idxmin()</code> 返回最小值的索引标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.idxmin())</span><br><span class="line"></span><br><span class="line">Python    (A, 期末)</span><br><span class="line">Math      (J, 期末)</span><br><span class="line">En        (C, 期中)</span><br><span class="line">dtype: <span class="built_in">object</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第三节-更多的统计指标">第三节 更多的统计指标</h3>
<ul>
<li>
<p><code>df['Python'].value_counts() </code> 统计元素出现次数</p>
</li>
<li>
<p><code>df['Keras'].unique()</code>  去重</p>
</li>
<li>
<p><code>df.cumsum()</code> 累加</p>
</li>
<li>
<p><code>df.cumprod()</code> 累乘</p>
</li>
<li>
<p><code>df.std()</code> 标准差</p>
</li>
<li>
<p><code>df.var() </code> 方差</p>
</li>
<li>
<p><code>df.cummin()</code> 累计最小值</p>
</li>
<li>
<p><code>df.cummax()</code> 累计最大值</p>
</li>
<li>
<p><code>df.diff()</code> 计算差分</p>
</li>
<li>
<p><code>df.pct_change()</code> 计算百分比变化</p>
</li>
</ul>
<h3 id="第四节-高级统计函数">第四节 高级统计函数</h3>
<ul>
<li>
<p><code>df.cov()</code> 属性的协方差</p>
</li>
<li>
<p><code>df['Python'].cov(df['Keras'])</code> Python和Keras的协方差</p>
</li>
<li>
<p><code>df.corr()</code>  所有属性相关性系数</p>
</li>
<li>
<p><code>df.corrwith(df['Tensorflow'])</code> 单一属性相关性系数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220501143400311-1651550716067.png" alt="相关公式"></p>
</li>
</ul>
<h2 id="第十一部分-数据排序">第十一部分 数据排序</h2>
<ul>
<li>
<p><code>df.sort_index()</code> 索引名排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">30</span>, size=(<span class="number">30</span>, <span class="number">3</span>)),</span><br><span class="line">                  index=<span class="built_in">list</span>(<span class="string">&#x27;qwertyuioijhgfcasdcvbnerfghjcf&#x27;</span>),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Keras&#x27;</span>, <span class="string">&#x27;Pytorch&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按照每一行的索引名排序</span></span><br><span class="line"><span class="comment"># axis：0表示行，1表示列</span></span><br><span class="line"><span class="comment"># ascending：是否升序排序</span></span><br><span class="line">res = df.sort_index(axis=<span class="number">0</span>,ascending=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.sort_values()</code>属性值排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按照指定列名进行排序</span></span><br><span class="line"><span class="comment"># by：指定排序的列名</span></span><br><span class="line"><span class="comment"># ascending：是否升序</span></span><br><span class="line">res = df.sort_values(by=[<span class="string">&#x27;Python&#x27;</span>],ascending=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>df.nlargest()</code>、<code>df.nsmallest()</code>返回属性n大或者n小的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#根据属性Keras排序,返回最大10个数据</span></span><br><span class="line"><span class="comment"># 第一个参数：指定返回的个数</span></span><br><span class="line"><span class="comment"># Columns：指定比较的列名</span></span><br><span class="line">res = df.nlargest(<span class="number">10</span>, columns=<span class="string">&#x27;Keras&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据属性Python排序，返回最小5个数据</span></span><br><span class="line">res2 = df.nsmallest(<span class="number">5</span>, columns=<span class="string">&#x27;Python&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第十二部分-分箱操作">第十二部分 分箱操作</h2>
<p>分箱操作就是将<strong>连续数据转换为分类对应物</strong>的过程。比如将连续的身高数据划分为：矮、中、高。</p>
<p>分箱操作分为<strong>等距分箱</strong>和<strong>等频分箱</strong>。</p>
<p>分箱操作也叫<strong>面元划分</strong>或者<strong>离散化</strong>。</p>
<ul>
<li>
<p>等宽分箱</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randint(<span class="number">0</span>, <span class="number">150</span>, size=(<span class="number">100</span>, <span class="number">3</span>)),</span><br><span class="line">                  columns=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Tensorflow&#x27;</span>, <span class="string">&#x27;Keras&#x27;</span>])</span><br><span class="line">res = pd.cut(df[<span class="string">&#x27;Python&#x27;</span>], bins=<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">0</span>     (<span class="number">49.667</span>, <span class="number">99.333</span>]</span><br><span class="line"><span class="number">1</span>      (<span class="number">99.333</span>, <span class="number">149.0</span>]</span><br><span class="line"><span class="number">2</span>     (-<span class="number">0.149</span>, <span class="number">49.667</span>]</span><br><span class="line"><span class="number">3</span>      (<span class="number">99.333</span>, <span class="number">149.0</span>]</span><br><span class="line"><span class="number">4</span>     (<span class="number">49.667</span>, <span class="number">99.333</span>]</span><br><span class="line">            ...       </span><br><span class="line"><span class="number">95</span>    (<span class="number">49.667</span>, <span class="number">99.333</span>]</span><br><span class="line"><span class="number">96</span>    (-<span class="number">0.149</span>, <span class="number">49.667</span>]</span><br><span class="line"><span class="number">97</span>     (<span class="number">99.333</span>, <span class="number">149.0</span>]</span><br><span class="line"><span class="number">98</span>    (<span class="number">49.667</span>, <span class="number">99.333</span>]</span><br><span class="line"><span class="number">99</span>    (<span class="number">49.667</span>, <span class="number">99.333</span>]</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>指定宽度分箱</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参数一：指定分箱的数据</span></span><br><span class="line"><span class="comment"># bins：分箱断点</span></span><br><span class="line"><span class="comment"># right：是否左闭右开</span></span><br><span class="line"><span class="comment"># labels：分箱后的分类标签</span></span><br><span class="line">res = pd.cut(df[<span class="string">&#x27;Keras&#x27;</span>],</span><br><span class="line">             bins=[<span class="number">0</span>, <span class="number">60</span>, <span class="number">90</span>, <span class="number">120</span>, <span class="number">150</span>],</span><br><span class="line">             right=<span class="literal">False</span>,</span><br><span class="line">             labels=[<span class="string">&#x27;不及格&#x27;</span>, <span class="string">&#x27;中等&#x27;</span>, <span class="string">&#x27;良好&#x27;</span>, <span class="string">&#x27;优秀&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"><span class="comment"># 统计不同值的个数</span></span><br><span class="line"><span class="built_in">print</span>(res.value_counts())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">0</span>      中等</span><br><span class="line"><span class="number">1</span>      中等</span><br><span class="line"><span class="number">2</span>      中等</span><br><span class="line"><span class="number">3</span>      良好</span><br><span class="line"><span class="number">4</span>      良好</span><br><span class="line">     ... </span><br><span class="line"><span class="number">95</span>    不及格</span><br><span class="line"><span class="number">96</span>    不及格</span><br><span class="line"><span class="number">97</span>     优秀</span><br><span class="line"><span class="number">98</span>    不及格</span><br><span class="line"><span class="number">99</span>     良好</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>等频分箱</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参数一：指定分箱的数据</span></span><br><span class="line"><span class="comment"># q：分类数</span></span><br><span class="line"><span class="comment"># labels：分箱后的分类标签</span></span><br><span class="line">res2 = pd.qcut(df[<span class="string">&#x27;Python&#x27;</span>],</span><br><span class="line">               q=<span class="number">4</span>,</span><br><span class="line">               labels=[<span class="string">&#x27;差&#x27;</span>, <span class="string">&#x27;中&#x27;</span>, <span class="string">&#x27;良&#x27;</span>, <span class="string">&#x27;优&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(res2)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第十三部分-分组聚合">第十三部分 分组聚合</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220501153208481-1651550716067.png" alt="groupby 过程拆解"></p>
<h3 id="第一节-分组">第一节 分组</h3>
<ul>
<li>
<p>创建初始数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(data=&#123;<span class="string">&#x27;sex&#x27;</span>: np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=<span class="number">300</span>),</span><br><span class="line">                        <span class="string">&#x27;class&#x27;</span>: np.random.randint(<span class="number">1</span>, <span class="number">9</span>, size=<span class="number">300</span>),</span><br><span class="line">                        <span class="string">&#x27;Python&#x27;</span>: np.random.randint(<span class="number">0</span>, <span class="number">151</span>, size=<span class="number">300</span>),</span><br><span class="line">                        <span class="string">&#x27;Java&#x27;</span>: np.random.randint(<span class="number">0</span>, <span class="number">151</span>, size=<span class="number">300</span>),</span><br><span class="line">                        <span class="string">&#x27;C++&#x27;</span>: np.random.randint(<span class="number">0</span>, <span class="number">151</span>, size=<span class="number">300</span>),</span><br><span class="line">                        <span class="string">&#x27;Pytorch&#x27;</span>: np.random.randint(<span class="number">0</span>, <span class="number">151</span>, size=<span class="number">300</span>),</span><br><span class="line">                        <span class="string">&#x27;En&#x27;</span>: np.random.randint(<span class="number">0</span>, <span class="number">151</span>, size=<span class="number">300</span>),</span><br><span class="line">                        &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行性别映射</span></span><br><span class="line">df[<span class="string">&#x27;sex&#x27;</span>] = df[<span class="string">&#x27;sex&#x27;</span>].<span class="built_in">map</span>(&#123;<span class="number">0</span>: <span class="string">&#x27;男&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;女&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>单分组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># df.groupby(by=&#x27;分组依据&#x27;)[[&#x27;分组内容&#x27;]]</span></span><br><span class="line"><span class="comment"># 不同性别同学的 Python 和 Java 成绩</span></span><br><span class="line">g = df.groupby(by=<span class="string">&#x27;sex&#x27;</span>)[[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>]]  <span class="comment"># 单分组</span></span><br><span class="line"><span class="keyword">for</span> name, data <span class="keyword">in</span> g:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;组名:&#x27;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;数据&#x27;</span>, data)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>多分组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不同班级、性别同学的Python成绩</span></span><br><span class="line">g2 = df.groupby(by=[<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>])[[<span class="string">&#x27;Python&#x27;</span>]]  <span class="comment"># 多分组</span></span><br><span class="line"><span class="keyword">for</span> name, data <span class="keyword">in</span> g2:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;组名&#x27;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;数据&#x27;</span>, data)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>对列进行分组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># df[&#x27;列名&#x27;].groupby(df[&#x27;分组内容&#x27;])</span></span><br><span class="line"><span class="comment"># 不同班级的 Python 成绩</span></span><br><span class="line">g3 = df[<span class="string">&#x27;Python&#x27;</span>].groupby(df[<span class="string">&#x27;class&#x27;</span>])  <span class="comment"># 单分组</span></span><br><span class="line"><span class="keyword">for</span> name, data <span class="keyword">in</span> g3:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;组名&#x27;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;数据&#x27;</span>, data)</span><br><span class="line">    </span><br><span class="line">g4 = df[<span class="string">&#x27;Java&#x27;</span>].groupby([df[<span class="string">&#x27;class&#x27;</span>], df[<span class="string">&#x27;sex&#x27;</span>]])  <span class="comment"># 多分组</span></span><br><span class="line"><span class="keyword">for</span> name, data <span class="keyword">in</span> g4:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;组名&#x27;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;数据&#x27;</span>, data)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>按数据类型进行分组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">g5 = df.groupby(df.dtypes, axis=<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> name, data <span class="keyword">in</span> g5:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;组名&#x27;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;数据&#x27;</span>, data)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>通过字典进行分组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span> = &#123;<span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;category&#x27;</span>, <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;category&#x27;</span>, <span class="string">&#x27;Python&#x27;</span>: <span class="string">&#x27;IT&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Java&#x27;</span>: <span class="string">&#x27;IT&#x27;</span>, <span class="string">&#x27;C++&#x27;</span>: <span class="string">&#x27;IT&#x27;</span>, <span class="string">&#x27;En&#x27;</span>: <span class="string">&#x27;Normal&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, data <span class="keyword">in</span> df.groupby(<span class="built_in">dict</span>, axis=<span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;组名&#x27;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;数据&#x27;</span>, data)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第二节-分组聚合">第二节 分组聚合</h3>
<ul>
<li>
<p>按照<strong>性别</strong>进行分组，其他列的<strong>均值</strong>进行聚合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不同性别同学的平均分</span></span><br><span class="line">g = df.groupby(by=<span class="string">&#x27;sex&#x27;</span>).mean().<span class="built_in">round</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">     <span class="keyword">class</span>  <span class="title class_">Python</span>  Java   C++  Pytorch    En</span><br><span class="line">sex                                          </span><br><span class="line">女      <span class="number">4.0</span>    <span class="number">74.0</span>  <span class="number">74.0</span>  <span class="number">75.0</span>     <span class="number">75.0</span>  <span class="number">77.0</span></span><br><span class="line">男      <span class="number">5.0</span>    <span class="number">73.0</span>  <span class="number">78.0</span>  <span class="number">78.0</span>     <span class="number">70.0</span>  <span class="number">74.0</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>按照<strong>班级</strong>和<strong>性别</strong>进行分组，Python和Java的<strong>最大值</strong>进行聚合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">g = df.groupby(by=[<span class="string">&#x27;class&#x27;</span>,<span class="string">&#x27;sex&#x27;</span>])[[<span class="string">&#x27;Python&#x27;</span>,<span class="string">&#x27;Java&#x27;</span>]].<span class="built_in">max</span>()</span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">           Python  Java</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sex</span>              </span><br><span class="line"><span class="number">1</span>     女       <span class="number">139</span>   <span class="number">137</span></span><br><span class="line">      男       <span class="number">148</span>   <span class="number">150</span></span><br><span class="line"><span class="number">2</span>     女       <span class="number">148</span>   <span class="number">139</span></span><br><span class="line">      男       <span class="number">123</span>   <span class="number">140</span></span><br><span class="line">····</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>按照<strong>班级</strong>和<strong>性别</strong>进行分组，<strong>计数</strong>进行聚合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">g = df.groupby(by=[<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>]).size()</span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">sex</span></span><br><span class="line"><span class="number">1</span>      女      <span class="number">12</span></span><br><span class="line">       男      <span class="number">18</span></span><br><span class="line"><span class="number">2</span>      女      <span class="number">24</span></span><br><span class="line">       男      <span class="number">22</span></span><br><span class="line">···</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>按照<strong>班级</strong>和<strong>性别</strong>进行分组，<strong>基本描述性统计</strong>进行聚合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">g = df.groupby(by=[<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>]).describe()</span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">          Python                              ...     En                      </span><br><span class="line">           count       mean        std   <span class="built_in">min</span>  ...    <span class="number">25</span>%    <span class="number">50</span>%     <span class="number">75</span>%    <span class="built_in">max</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sex</span>                                     ...                             </span><br><span class="line"><span class="number">1</span>     女     <span class="number">22.0</span>  <span class="number">83.363636</span>  <span class="number">41.496466</span>   <span class="number">3.0</span>  ...  <span class="number">56.25</span>   <span class="number">99.5</span>  <span class="number">117.50</span>  <span class="number">149.0</span></span><br><span class="line">      男     <span class="number">22.0</span>  <span class="number">86.818182</span>  <span class="number">43.046637</span>  <span class="number">15.0</span>  ...  <span class="number">25.75</span>   <span class="number">65.5</span>  <span class="number">103.75</span>  <span class="number">148.0</span></span><br><span class="line"><span class="number">2</span>     女     <span class="number">19.0</span>  <span class="number">79.105263</span>  <span class="number">42.320070</span>   <span class="number">5.0</span>  ...  <span class="number">27.00</span>   <span class="number">48.0</span>   <span class="number">92.00</span>  <span class="number">122.0</span></span><br><span class="line">      男     <span class="number">15.0</span>  <span class="number">73.933333</span>  <span class="number">35.690068</span>  <span class="number">18.0</span>  ...  <span class="number">65.50</span>   <span class="number">90.0</span>  <span class="number">125.00</span>  <span class="number">147.0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第三节-分组聚合apply、transform">第三节 分组聚合apply、transform</h3>
<ul>
<li>
<p><code>apply()</code> 返回三类汇总情况</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220502151030440.png" alt="apply 方式"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不带括号的参数是指传入的是整个方法</span></span><br><span class="line">res = df.groupby(by=[<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>])[[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>]].apply(np.mean).<span class="built_in">round</span>(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># res = df.groupby(by=[&#x27;class&#x27;, &#x27;sex&#x27;])[[&#x27;Python&#x27;, &#x27;Java&#x27;]].apply(lambda x: x.mean()).round(1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">           Python   Java</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sex</span>               </span><br><span class="line"><span class="number">1</span>     女      <span class="number">86.0</span>   <span class="number">85.4</span></span><br><span class="line">      男      <span class="number">78.1</span>  <span class="number">100.2</span></span><br><span class="line"><span class="number">2</span>     女      <span class="number">94.0</span>   <span class="number">71.2</span></span><br><span class="line">      男      <span class="number">74.6</span>   <span class="number">79.4</span></span><br><span class="line"><span class="number">3</span>     女      <span class="number">68.4</span>   <span class="number">63.6</span></span><br><span class="line">      男      <span class="number">87.8</span>   <span class="number">80.9</span></span><br><span class="line"><span class="number">4</span>     女      <span class="number">83.2</span>   <span class="number">72.3</span></span><br><span class="line">      男      <span class="number">64.0</span>   <span class="number">59.9</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>transform()</code> 返回全部元素</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220502151057242.png" alt="transform 方式"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">res2 = df.groupby(by=[<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>])[[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>]].transform(np.mean).<span class="built_in">round</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">     Python  Java</span><br><span class="line"><span class="number">0</span>      <span class="number">87.8</span>  <span class="number">78.5</span></span><br><span class="line"><span class="number">1</span>      <span class="number">80.0</span>  <span class="number">64.3</span></span><br><span class="line"><span class="number">2</span>      <span class="number">82.0</span>  <span class="number">76.0</span></span><br><span class="line"><span class="number">3</span>      <span class="number">71.2</span>  <span class="number">70.3</span></span><br><span class="line"><span class="number">4</span>      <span class="number">91.1</span>  <span class="number">76.3</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第四节-分组聚合agg">第四节 分组聚合agg</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220502153610609.png" alt="agg 过程图解"></p>
<p>分组组合可以对不同的列做不同的操作</p>
<ul>
<li>
<p>分组后调用 <code>agg()</code>应用多种统计汇总</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分别计算 Python、Java 的最大值、最小值、数量和</span></span><br><span class="line"><span class="comment"># 不带括号的参数是指传入的是整个方法</span></span><br><span class="line">res = df.groupby(by=[<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>])[[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>]].agg([np.<span class="built_in">max</span>, np.<span class="built_in">min</span>, pd.Series.count])</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">          Python            Java           </span><br><span class="line">            amax amin count amax amin count</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sex</span>                                  </span><br><span class="line"><span class="number">1</span>     女      <span class="number">137</span>    <span class="number">1</span>    <span class="number">23</span>  <span class="number">148</span>    <span class="number">5</span>    <span class="number">23</span></span><br><span class="line">      男      <span class="number">142</span>    <span class="number">1</span>    <span class="number">12</span>  <span class="number">138</span>   <span class="number">10</span>    <span class="number">12</span></span><br><span class="line"><span class="number">2</span>     女      <span class="number">150</span>    <span class="number">2</span>    <span class="number">19</span>  <span class="number">139</span>   <span class="number">15</span>    <span class="number">19</span></span><br><span class="line">      男      <span class="number">132</span>    <span class="number">2</span>     <span class="number">7</span>  <span class="number">137</span>   <span class="number">46</span>     <span class="number">7</span></span><br><span class="line"><span class="number">3</span>     女      <span class="number">150</span>    <span class="number">6</span>    <span class="number">13</span>  <span class="number">124</span>    <span class="number">2</span>    <span class="number">13</span></span><br><span class="line">      男      <span class="number">142</span>    <span class="number">1</span>    <span class="number">22</span>  <span class="number">141</span>    <span class="number">1</span>    <span class="number">22</span></span><br><span class="line"><span class="number">4</span>     女      <span class="number">146</span>    <span class="number">8</span>    <span class="number">21</span>  <span class="number">134</span>   <span class="number">18</span>    <span class="number">21</span></span><br><span class="line">      男      <span class="number">149</span>    <span class="number">4</span>    <span class="number">29</span>  <span class="number">149</span>    <span class="number">2</span>    <span class="number">29</span></span><br><span class="line"><span class="number">5</span>     女      <span class="number">147</span>   <span class="number">15</span>     <span class="number">9</span>  <span class="number">150</span>    <span class="number">8</span>     <span class="number">9</span></span><br><span class="line">      男      <span class="number">149</span>    <span class="number">9</span>    <span class="number">23</span>  <span class="number">137</span>    <span class="number">2</span>    <span class="number">23</span></span><br><span class="line">····</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>分组后不同属性应用多种不同统计汇总</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分别对 Python 和 Java 的不同属性做统计</span></span><br><span class="line">res = df.groupby(by=[<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>])[[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>]].agg(&#123;<span class="string">&#x27;Python&#x27;</span>: [(<span class="string">&#x27;最大值&#x27;</span>, np.<span class="built_in">max</span>), (<span class="string">&#x27;最小值&#x27;</span>, np.<span class="built_in">min</span>)],</span><br><span class="line">                                                               <span class="string">&#x27;Java&#x27;</span>: [(<span class="string">&#x27;计数&#x27;</span>, pd.Series.count),(<span class="string">&#x27;中位数&#x27;</span>, np.median)]&#125;)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第五节-透视表">第五节 透视表</h3>
<ul>
<li>
<p>透视表也是一种分组聚合运算</p>
<ul>
<li>values：要透视分组的值，纵坐标</li>
<li>index：分组透视指标，横坐标</li>
<li>aggfunc：聚合运算</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(x)</span><br><span class="line"></span><br><span class="line">res = df.pivot_table(values=[<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>, <span class="string">&#x27;Pytorch&#x27;</span>],</span><br><span class="line">                     index=[<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>],</span><br><span class="line">                     aggfunc=&#123;<span class="string">&#x27;Python&#x27;</span>: [(<span class="string">&#x27;最大值&#x27;</span>, np.<span class="built_in">max</span>)],</span><br><span class="line">                              <span class="string">&#x27;Java&#x27;</span>: [(<span class="string">&#x27;最小值&#x27;</span>, np.<span class="built_in">min</span>), (<span class="string">&#x27;中位数&#x27;</span>, np.median)],</span><br><span class="line">                              <span class="string">&#x27;Pytorch&#x27;</span>: [(<span class="string">&#x27;最小值&#x27;</span>, np.mean), (<span class="string">&#x27;平均值&#x27;</span>, np.average), (<span class="string">&#x27;计数&#x27;</span>, count)]&#125;)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">           Java     Python    Pytorch               </span><br><span class="line">             中位数 最小值    最大值        平均值        最小值  计数</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sex</span>                                            </span><br><span class="line"><span class="number">1</span>     女     <span class="number">80.5</span>   <span class="number">6</span>    <span class="number">137</span>  <span class="number">68.045455</span>  <span class="number">68.045455</span>  <span class="number">22</span></span><br><span class="line">      男     <span class="number">70.0</span>   <span class="number">0</span>    <span class="number">147</span>  <span class="number">60.600000</span>  <span class="number">60.600000</span>  <span class="number">25</span></span><br><span class="line"><span class="number">2</span>     女     <span class="number">57.5</span>   <span class="number">2</span>    <span class="number">147</span>  <span class="number">77.187500</span>  <span class="number">77.187500</span>  <span class="number">16</span></span><br><span class="line">      男     <span class="number">93.0</span>  <span class="number">25</span>    <span class="number">108</span>  <span class="number">65.272727</span>  <span class="number">65.272727</span>  <span class="number">11</span></span><br><span class="line"><span class="number">3</span>     女     <span class="number">71.5</span>   <span class="number">5</span>    <span class="number">139</span>  <span class="number">79.125000</span>  <span class="number">79.125000</span>  <span class="number">32</span></span><br><span class="line">      男     <span class="number">81.0</span>   <span class="number">4</span>    <span class="number">148</span>  <span class="number">82.705882</span>  <span class="number">82.705882</span>  <span class="number">17</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第室四部分-时间序列">第室四部分 时间序列</h2>
<h3 id="第一节-时间戳操作">第一节 时间戳操作</h3>
<ul>
<li>
<p>时刻数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ts = pd.Timestamp(<span class="string">&#x27;2022-05-03 12&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(ts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">2022</span>-05-03 <span class="number">12</span>:<span class="number">00</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>批量时刻数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一个参数：开始时间</span></span><br><span class="line"><span class="comment"># period：时间数量</span></span><br><span class="line"><span class="comment"># freq：每个时间的间隔</span></span><br><span class="line">date_range = pd.date_range(<span class="string">&#x27;2022.05.03&#x27;</span>, periods=<span class="number">5</span>, freq=<span class="string">&#x27;M&#x27;</span>)	</span><br><span class="line"><span class="built_in">print</span>(date_range)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">DatetimeIndex([<span class="string">&#x27;2022-05-31&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;2022-06-30&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;2022-07-31&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;2022-08-31&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;2022-09-30&#x27;</span>],dtype=<span class="string">&#x27;datetime64[ns]&#x27;</span>, freq=<span class="string">&#x27;M&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>时期数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># freq：表示频率，&#x27;M’代表月份</span></span><br><span class="line">ts = pd.Period(<span class="string">&#x27;2022-05-03&#x27;</span>, freq=<span class="string">&#x27;M&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(ts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">2022</span>-05</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>批量时期数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">period_range = pd.period_range(<span class="string">&#x27;2022.05.03&#x27;</span>, periods=<span class="number">5</span>, freq=<span class="string">&#x27;M&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(period_range)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">PeriodIndex([<span class="string">&#x27;2022-05&#x27;</span>,</span><br><span class="line">             <span class="string">&#x27;2022-06&#x27;</span>,</span><br><span class="line">             <span class="string">&#x27;2022-07&#x27;</span>,</span><br><span class="line">             <span class="string">&#x27;2022-08&#x27;</span>,</span><br><span class="line">             <span class="string">&#x27;2022-09&#x27;</span>], dtype=<span class="string">&#x27;period[M]&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>时间戳索引 Series</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 批量时刻数据</span></span><br><span class="line">date_range = pd.date_range(<span class="string">&#x27;2022.05.03&#x27;</span>, periods=<span class="number">5</span>, freq=<span class="string">&#x27;M&#x27;</span>)</span><br><span class="line">ts = pd.Series(data=<span class="built_in">range</span>(<span class="built_in">len</span>(date_range)), index=date_range)</span><br><span class="line"><span class="built_in">print</span>(ts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">2022</span>-05-<span class="number">31</span>    <span class="number">0</span></span><br><span class="line"><span class="number">2022</span>-06-<span class="number">30</span>    <span class="number">1</span></span><br><span class="line"><span class="number">2022</span>-07-<span class="number">31</span>    <span class="number">2</span></span><br><span class="line"><span class="number">2022</span>-08-<span class="number">31</span>    <span class="number">3</span></span><br><span class="line"><span class="number">2022</span>-09-<span class="number">30</span>    <span class="number">4</span></span><br><span class="line">Freq: M, dtype: int64</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>转换方法</p>
<ul>
<li>
<p>批量字符串转换时间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dt = pd.to_datetime([<span class="string">&#x27;2022.05.03&#x27;</span>, <span class="string">&#x27;2022-05-03&#x27;</span>, <span class="string">&#x27;2022/05/03&#x27;</span>, <span class="string">&#x27;03/05/2022&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(dt)</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">DatetimeIndex([<span class="string">&#x27;2022-05-03&#x27;</span>, <span class="string">&#x27;2022-05-03&#x27;</span>, <span class="string">&#x27;2022-05-03&#x27;</span>, <span class="string">&#x27;2022-03-05&#x27;</span>], dtype=<span class="string">&#x27;datetime64[ns]&#x27;</span>, freq=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>数字转时间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># unit指定单位，s代表秒</span></span><br><span class="line">dt = pd.to_datetime([<span class="number">1999999999</span>], unit=<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(dt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">DatetimeIndex([<span class="string">&#x27;2033-05-18 03:33:19&#x27;</span>], dtype=<span class="string">&#x27;datetime64[ns]&#x27;</span>, freq=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>世界标准时间转换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dt = pd.to_datetime([<span class="number">1999999999999</span>], unit=<span class="string">&#x27;ms&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(dt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 东八区</span></span><br><span class="line">dt2 = dt + pd.DateOffset(hours=<span class="number">8</span>)</span><br><span class="line"><span class="built_in">print</span>(dt2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 100天后日期</span></span><br><span class="line">dt3 = dt + pd.DateOffset(days=<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(dt3)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="第二节-时间戳索引">第二节 时间戳索引</h3>
<ul>
<li>
<p>创建时间戳索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">date_range = pd.date_range(<span class="string">&#x27;2022.05.03&#x27;</span>, periods=<span class="number">5</span>, freq=<span class="string">&#x27;M&#x27;</span>)</span><br><span class="line">ts = pd.Series(data=<span class="built_in">range</span>(<span class="built_in">len</span>(date_range)), index=date_range)</span><br><span class="line"><span class="built_in">print</span>(ts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">2022</span>-05-<span class="number">31</span>    <span class="number">0</span></span><br><span class="line"><span class="number">2022</span>-06-<span class="number">30</span>    <span class="number">1</span></span><br><span class="line"><span class="number">2022</span>-07-<span class="number">31</span>    <span class="number">2</span></span><br><span class="line"><span class="number">2022</span>-08-<span class="number">31</span>    <span class="number">3</span></span><br><span class="line"><span class="number">2022</span>-09-<span class="number">30</span>    <span class="number">4</span></span><br><span class="line">Freq: M, dtype: int64</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>日期访问</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 传入日期</span></span><br><span class="line"><span class="built_in">print</span>(ts[<span class="string">&#x27;2022-07-31&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">----------------------------------------</span><br><span class="line"><span class="comment"># 传入年月</span></span><br><span class="line"><span class="built_in">print</span>(ts[<span class="string">&#x27;2022-8&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出2</span></span><br><span class="line"><span class="number">2022</span>-08-<span class="number">31</span>    <span class="number">3</span></span><br><span class="line">Freq: M, dtype: int64</span><br><span class="line">----------------------------------------</span><br><span class="line"><span class="comment"># 传入年</span></span><br><span class="line"><span class="built_in">print</span>(ts[<span class="string">&#x27;2022&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出3</span></span><br><span class="line"><span class="number">2022</span>-05-<span class="number">31</span>    <span class="number">0</span></span><br><span class="line"><span class="number">2022</span>-06-<span class="number">30</span>    <span class="number">1</span></span><br><span class="line"><span class="number">2022</span>-07-<span class="number">31</span>    <span class="number">2</span></span><br><span class="line"><span class="number">2022</span>-08-<span class="number">31</span>    <span class="number">3</span></span><br><span class="line"><span class="number">2022</span>-09-<span class="number">30</span>    <span class="number">4</span></span><br><span class="line">Freq: M, dtype: int64</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>日期切片</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(ts[<span class="string">&#x27;2022-05-03&#x27;</span>:<span class="string">&#x27;2022-09-03&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">2022</span>-05-<span class="number">31</span>    <span class="number">0</span></span><br><span class="line"><span class="number">2022</span>-06-<span class="number">30</span>    <span class="number">1</span></span><br><span class="line"><span class="number">2022</span>-07-<span class="number">31</span>    <span class="number">2</span></span><br><span class="line"><span class="number">2022</span>-08-<span class="number">31</span>    <span class="number">3</span></span><br><span class="line">Freq: M, dtype: int64</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>时间戳索引属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(ts.index.year)		<span class="comment"># 获取年</span></span><br><span class="line"><span class="built_in">print</span>(ts.index.week)		<span class="comment"># 获取星期</span></span><br><span class="line"><span class="built_in">print</span>(ts.index.weekofyear)	<span class="comment"># 获取一年中的第几个星期</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">Int64Index([<span class="number">2022</span>, <span class="number">2022</span>, <span class="number">2022</span>, <span class="number">2022</span>, <span class="number">2022</span>], dtype=<span class="string">&#x27;int64&#x27;</span>)</span><br><span class="line">Int64Index([<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>], dtype=<span class="string">&#x27;int64&#x27;</span>)</span><br><span class="line">Int64Index([<span class="number">22</span>, <span class="number">26</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">39</span>], dtype=<span class="string">&#x27;int64&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第三节-时间序列常用方法">第三节 时间序列常用方法</h3>
<p>在做时间序列相关的工作时，经常要对时间做一些移动/滞后、频率转换、采样等相关操作，我们来看下 这些操作如何使用</p>
<ul>
<li>
<p>创建数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date_range = pd.date_range(<span class="string">&#x27;2022.05.03&#x27;</span>, periods=<span class="number">365</span>, freq=<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">ts = pd.Series(data=<span class="built_in">range</span>(<span class="built_in">len</span>(date_range)), index=date_range)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>时间移动</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ts.shift(periods = <span class="number">2</span>) <span class="comment"># 数据后移</span></span><br><span class="line">ts.shift(periods = -<span class="number">2</span>) <span class="comment"># 数据前移</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>日期移动</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ts.shift(periods = <span class="number">2</span>,freq = pd.tseries.offsets.Day()) <span class="comment"># 天移动</span></span><br><span class="line">ts.tshift(periods = <span class="number">1</span>,freq = pd.tseries.offsets.MonthOffset()) <span class="comment">#月移动</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>频率转换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ts.asfreq(pd.tseries.offsets.Week()) <span class="comment"># 天变周</span></span><br><span class="line">ts.asfreq(pd.tseries.offsets.MonthEnd()) <span class="comment"># 天变月</span></span><br><span class="line">ts.asfreq(pd.tseries.offsets.Hour(),fill_value = <span class="number">0</span>) <span class="comment">#天变小时，又少变多，fill_value</span></span><br><span class="line">为填充值</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>重采样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># resample 表示根据日期维度进行数据聚合，可以按照分钟、小时、工作日、周、月、年等来作为日期维度</span></span><br><span class="line">ts.resample(<span class="string">&#x27;2W&#x27;</span>).<span class="built_in">sum</span>() <span class="comment"># 以2周为单位进行汇总</span></span><br><span class="line">ts.resample(<span class="string">&#x27;3M&#x27;</span>).<span class="built_in">sum</span>().cumsum() <span class="comment"># 以季度为单位进行汇总</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>DataFrame重采样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">d = <span class="built_in">dict</span>(&#123;<span class="string">&#x27;price&#x27;</span>: [<span class="number">10</span>, <span class="number">11</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">19</span>],</span><br><span class="line">		  <span class="string">&#x27;volume&#x27;</span>: [<span class="number">50</span>, <span class="number">60</span>, <span class="number">40</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">40</span>, <span class="number">50</span>],</span><br><span class="line">          <span class="string">&#x27;week_starting&#x27;</span>:pd.date_range(<span class="string">&#x27;24/08/2020&#x27;</span>,periods=<span class="number">8</span>,freq=<span class="string">&#x27;W&#x27;</span>)&#125;)</span><br><span class="line">df1 = pd.DataFrame(d)</span><br><span class="line">df1.resample(<span class="string">&#x27;M&#x27;</span>,on = <span class="string">&#x27;week_starting&#x27;</span>).apply(np.<span class="built_in">sum</span>)</span><br><span class="line">df1.resample(<span class="string">&#x27;M&#x27;</span>,on = <span class="string">&#x27;week_starting&#x27;</span>).agg(&#123;<span class="string">&#x27;price&#x27;</span>:np.mean,<span class="string">&#x27;volume&#x27;</span>:np.<span class="built_in">sum</span>&#125;)</span><br><span class="line"></span><br><span class="line">days = pd.date_range(<span class="string">&#x27;1/8/2020&#x27;</span>, periods=<span class="number">4</span>, freq=<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">data2 = <span class="built_in">dict</span>(&#123;<span class="string">&#x27;price&#x27;</span>: [<span class="number">10</span>, <span class="number">11</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">19</span>],</span><br><span class="line">              <span class="string">&#x27;volume&#x27;</span>: [<span class="number">50</span>, <span class="number">60</span>, <span class="number">40</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">40</span>, <span class="number">50</span>]&#125;)</span><br><span class="line">df2 = pd.DataFrame(data2,</span><br><span class="line">				   index=pd.MultiIndex.from_product([days,[<span class="string">&#x27;morning&#x27;</span>,<span class="string">&#x27;afternoon&#x27;</span>]]))</span><br><span class="line">df2.resample(<span class="string">&#x27;D&#x27;</span>, level=<span class="number">0</span>).<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第四节-时区表">第四节 时区表</h3>
<p>时区表示需要引入 pytz 包</p>
<ul>
<li>
<p>常用时区</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用时区</span></span><br><span class="line"><span class="built_in">print</span>(pytz.common_timezones)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">[<span class="string">&#x27;Africa/Abidjan&#x27;</span>, <span class="string">&#x27;Africa/Accra&#x27;</span>, <span class="string">&#x27;Africa/Addis_Ababa&#x27;</span>, <span class="string">&#x27;Africa/Algiers&#x27;</span>, <span class="string">&#x27;Africa/Asmara&#x27;</span>, <span class="string">&#x27;Africa/Bamako&#x27;</span>, <span class="string">&#x27;Africa/Bangui&#x27;</span>, <span class="string">&#x27;Africa/Banjul&#x27;</span>, <span class="string">&#x27;Africa/Bissau&#x27;</span>, <span class="string">&#x27;Africa/Blantyre&#x27;</span>, <span class="string">&#x27;Africa/Brazzaville&#x27;</span>····]</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>时区表示</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">date_range = pd.date_range(<span class="string">&#x27;2022.05.03&#x27;</span>, periods=<span class="number">5</span>, freq=<span class="string">&#x27;M&#x27;</span>)</span><br><span class="line">ts = pd.Series(data=<span class="built_in">range</span>(<span class="built_in">len</span>(date_range)), index=date_range)</span><br><span class="line"><span class="built_in">print</span>(ts.tz_localize(tz=<span class="string">&#x27;UTC&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">2022</span>-05-<span class="number">31</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>+<span class="number">00</span>:<span class="number">00</span>    <span class="number">0</span></span><br><span class="line"><span class="number">2022</span>-06-<span class="number">30</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>+<span class="number">00</span>:<span class="number">00</span>    <span class="number">1</span></span><br><span class="line"><span class="number">2022</span>-07-<span class="number">31</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>+<span class="number">00</span>:<span class="number">00</span>    <span class="number">2</span></span><br><span class="line"><span class="number">2022</span>-08-<span class="number">31</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>+<span class="number">00</span>:<span class="number">00</span>    <span class="number">3</span></span><br><span class="line"><span class="number">2022</span>-09-<span class="number">30</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>+<span class="number">00</span>:<span class="number">00</span>    <span class="number">4</span></span><br><span class="line">Freq: M, dtype: int64</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第十五部分-数据可视化">第十五部分 数据可视化</h2>
<ul>
<li>
<p>线性图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.randn(<span class="number">1000</span>, <span class="number">4</span>),		<span class="comment"># 纵坐标</span></span><br><span class="line">                  index=pd.date_range(start=<span class="string">&#x27;27/6/2021&#x27;</span>, periods=<span class="number">1000</span>),	<span class="comment"># 横坐标</span></span><br><span class="line">                  columns=<span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>))		<span class="comment"># 具体单元</span></span><br><span class="line">df.cumsum().plot()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503101318442.png" alt="条形图"></p>
</li>
<li>
<p>柱状图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.rand(<span class="number">10</span>, <span class="number">4</span>),	<span class="comment"># 横纵纵坐标</span></span><br><span class="line">                  columns=<span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>))		<span class="comment"># 数据单元 </span></span><br><span class="line">df.plot.bar(stacked=<span class="literal">True</span>)	<span class="comment"># 是否可堆叠</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503101652678.png" alt="柱状图"></p>
</li>
<li>
<p>饼图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.rand(<span class="number">4</span>, <span class="number">2</span>),	<span class="comment"># 2组4个数据</span></span><br><span class="line">                  index=<span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>),			<span class="comment"># 具体单元</span></span><br><span class="line">                  columns=[<span class="string">&#x27;One&#x27;</span>, <span class="string">&#x27;Two&#x27;</span>])		<span class="comment"># 饼图个数</span></span><br><span class="line">df.plot.pie(subplots=<span class="literal">True</span>, figsize=(<span class="number">8</span>, <span class="number">8</span>))		<span class="comment"># subplots：多张图</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503102039652.png" alt="饼图"></p>
</li>
<li>
<p>散点图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.rand(<span class="number">50</span>, <span class="number">4</span>),	<span class="comment"># 创建4组50个数据</span></span><br><span class="line">                  columns=<span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>))</span><br><span class="line">df.plot.scatter(x=<span class="string">&#x27;A&#x27;</span>, y=<span class="string">&#x27;B&#x27;</span>)		<span class="comment"># 确定 AB 的关系</span></span><br><span class="line">ax = df.plot.scatter(x=<span class="string">&#x27;A&#x27;</span>, y=<span class="string">&#x27;C&#x27;</span>, c=<span class="string">&#x27;DarkBlue&#x27;</span>, label=<span class="string">&#x27;Group1&#x27;</span>)	<span class="comment"># 绘制AC散点图</span></span><br><span class="line">df.plot.scatter(x=<span class="string">&#x27;B&#x27;</span>, y=<span class="string">&#x27;D&#x27;</span>, c=<span class="string">&#x27;DarkGreen&#x27;</span>, label=<span class="string">&#x27;Group2&#x27;</span>, ax=ax)	<span class="comment"># 绘制BD散点图</span></span><br><span class="line">df.plot.scatter(x=<span class="string">&#x27;A&#x27;</span>, y=<span class="string">&#x27;B&#x27;</span>, s=df[<span class="string">&#x27;C&#x27;</span>] * <span class="number">200</span>)		<span class="comment"># 设置散点的大小</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503102910023.png" alt="散点图-1"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503103301695.png" alt="散点图-2"></p>
</li>
<li>
<p>面积图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.rand(<span class="number">10</span>, <span class="number">4</span>),	<span class="comment"># 4组10个数据</span></span><br><span class="line">                  columns=<span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>))			<span class="comment"># 四个单元</span></span><br><span class="line">df.plot.area(stacked=<span class="literal">True</span>)  <span class="comment"># 是否可堆叠</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503103625190.png" alt="面积图"></p>
</li>
<li>
<p>箱式图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=np.random.rand(<span class="number">10</span>, <span class="number">5</span>),	<span class="comment"># 10组5个数据</span></span><br><span class="line">                  columns=<span class="built_in">list</span>(<span class="string">&#x27;ABCDE&#x27;</span>))		<span class="comment"># 5个单元</span></span><br><span class="line">df.plot.box()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503103859296.png" alt="箱式图"></p>
</li>
<li>
<p>直方图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data=&#123;<span class="string">&#x27;A&#x27;</span>: np.random.randn(<span class="number">1000</span>) + <span class="number">1</span>,</span><br><span class="line">                        <span class="string">&#x27;B&#x27;</span>: np.random.randn(<span class="number">1000</span>),</span><br><span class="line">                        <span class="string">&#x27;C&#x27;</span>: np.random.randn(<span class="number">1000</span>) - <span class="number">1</span>&#125;)</span><br><span class="line">df.plot.hist(alpha=<span class="number">0.5</span>)		<span class="comment"># 设置透明度</span></span><br><span class="line">df.plot.hist(stacked=<span class="literal">True</span>)	<span class="comment"># 是否可堆叠</span></span><br><span class="line">df.hist(figsize=(<span class="number">8</span>, <span class="number">8</span>))		<span class="comment"># 子视图绘制</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503104346398.png" alt="直方图-未堆叠"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20220503104332564.png" alt="直方图-堆叠"></p>
</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne.gitee.io/kuhne.gitee.io/img/head.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne.gitee.io/kuhne.gitee.io/img/head.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Kuhne</div><div class="post-copyright__author_desc">间接性内卷 持续性摆烂</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://kuhne.gitee.io/kuhne.gitee.io/posts/da1a8524.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://kuhne.gitee.io/kuhne.gitee.io/posts/da1a8524.html')">Pandas基础教程</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://kuhne.gitee.io/kuhne.gitee.io/posts/da1a8524.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Pandas基础教程&amp;url=https://kuhne.gitee.io/kuhne.gitee.io/posts/da1a8524.html&amp;pic=https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/Pandas_Logo.jpeg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://kuhne.gitee.io/kuhne.gitee.io" target="_blank">Kuhne</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Python/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Python<span class="tagsPageCount">6</span></a><a class="post-meta__box__tags" href="/tags/%E5%B7%A5%E5%85%B7/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>工具<span class="tagsPageCount">3</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/02/27/20230227141226-160f64.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/38d2ff3.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/Numpy_Logo2.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Numpy基础教程</div></div></a></div><div class="next-post pull-right"><a href="/posts/af5d191f.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/1cc2cc32c428a61ce3eb2f191668eb9c.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Matplotlib 基础教程</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/af5d191f.html" title="Matplotlib 基础教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/1cc2cc32c428a61ce3eb2f191668eb9c.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-05-03</div><div class="title">Matplotlib 基础教程</div></div></a></div><div><a href="/posts/38d2ff3.html" title="Numpy基础教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/Numpy_Logo2.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-05-02</div><div class="title">Numpy基础教程</div></div></a></div><div><a href="/posts/96074ef.html" title="Conda 指令总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/ef3cfeb23ed8a41b1c7e2e714c5a9b2f.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-07-28</div><div class="title">Conda 指令总结</div></div></a></div><div><a href="/posts/2609eb73.html" title="PyTorch 学习笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/1cc2cc32c428a61ce3eb2f191668eb9c.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-07-07</div><div class="title">PyTorch 学习笔记</div></div></a></div><div><a href="/posts/99832f47.html" title="Python基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/c59ba07eefc154fd81aac8f18b4b5513.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-04-11</div><div class="title">Python基础</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne.gitee.io/kuhne.gitee.io/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/bilibili2233/[2233娘_吐魂].png" ait="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">一个菜鸟的垃圾加工厂。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">希望你你可以在这里找到对你有用的<b style="color:#fff">有用</b>的<b style="color:#fff">垃圾</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Kuhne</h1><div class="author-info__desc">间接性内卷 持续性摆烂</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">Pandas 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-Pandas%E4%BB%8B%E7%BB%8D"><span class="toc-text">第一部分 Pandas介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">第二部分 数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-Series%EF%BC%88%E4%B8%80%E7%BB%B4%EF%BC%89"><span class="toc-text">第一节 Series（一维）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-DataFrame%EF%BC%88%E4%BA%8C%E7%BB%B4%EF%BC%89"><span class="toc-text">第二节 DataFrame（二维）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E6%9F%A5%E7%9C%8B"><span class="toc-text">第三部分 数据查看</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE-I-O"><span class="toc-text">第四部分 数据 I&#x2F;O</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-csv"><span class="toc-text">第一节 csv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-Excel"><span class="toc-text">第二节 Excel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8A%82-SQL"><span class="toc-text">第三节 SQL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E9%80%89%E5%8F%96"><span class="toc-text">第五部分 数据选取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-%E5%AD%97%E6%AE%B5%E6%95%B0%E6%8D%AE"><span class="toc-text">第一节 字段数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-%E8%A1%8C%E7%9A%84%E8%8E%B7%E5%8F%96"><span class="toc-text">第二节 行的获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8A%82-%E5%85%B7%E4%BD%93%E6%95%B0%E5%80%BC%E8%8E%B7%E5%8F%96"><span class="toc-text">第三节 具体数值获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E8%8A%82-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">第四节 条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E8%8A%82-%E6%95%B0%E6%8D%AE%E8%B5%8B%E5%80%BC"><span class="toc-text">第五节 数据赋值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E9%9B%86%E6%88%90"><span class="toc-text">第六部分  数据集成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-concat-%E6%95%B0%E6%8D%AE%E4%B8%B2%E8%81%94"><span class="toc-text">第一节 concat 数据串联</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-%E6%8F%92%E5%85%A5"><span class="toc-text">第二节 插入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8A%82-SQL%E9%A3%8E%E6%A0%BC%E5%90%88%E5%B9%B6%EF%BC%88Join%EF%BC%89"><span class="toc-text">第三节 SQL风格合并（Join）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97"><span class="toc-text">第七部分 数据清洗</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2"><span class="toc-text">第八部分 数据转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-%E8%BD%B4%E5%92%8C%E5%85%83%E7%B4%A0%E7%9A%84%E6%9B%BF%E6%8D%A2"><span class="toc-text">第一节 轴和元素的替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-map-Series-%E5%85%83%E7%B4%A0%E6%94%B9%E5%8F%98"><span class="toc-text">第二节 map Series 元素改变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8A%82-apply-Series-%E5%92%8C-DataFrame%E5%85%83%E7%B4%A0%E6%94%B9%E5%8F%98"><span class="toc-text">第三节 apply Series 和 DataFrame元素改变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E8%8A%82-transform-%E7%A9%BA"><span class="toc-text">第四节 transform(空)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E8%8A%82-%E9%87%8D%E6%8E%92%E3%80%81%E9%9A%8F%E5%8D%B3%E6%8A%BD%E6%A0%B7%E3%80%81%E5%93%91%E5%8F%98%E9%87%8F-%E7%A9%BA"><span class="toc-text">第五节 重排、随即抽样、哑变量(空)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E9%87%8D%E5%A1%91"><span class="toc-text">第九部分 数据重塑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E9%83%A8%E5%88%86-%E6%95%B0%E5%AD%A6%E5%92%8C%E7%BB%9F%E8%AE%A1%E6%96%B9%E6%B3%95"><span class="toc-text">第十部分 数学和统计方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-%E7%AE%80%E5%8D%95%E7%BB%9F%E8%AE%A1%E6%8C%87%E6%A0%87"><span class="toc-text">第一节 简单统计指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-%E7%B4%A2%E5%BC%95%E6%A0%87%E7%AD%BE%E3%80%81%E4%BD%8D%E7%BD%AE%E8%8E%B7%E5%8F%96"><span class="toc-text">第二节 索引标签、位置获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8A%82-%E6%9B%B4%E5%A4%9A%E7%9A%84%E7%BB%9F%E8%AE%A1%E6%8C%87%E6%A0%87"><span class="toc-text">第三节 更多的统计指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E8%8A%82-%E9%AB%98%E7%BA%A7%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0"><span class="toc-text">第四节 高级统计函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E6%8E%92%E5%BA%8F"><span class="toc-text">第十一部分 数据排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E9%83%A8%E5%88%86-%E5%88%86%E7%AE%B1%E6%93%8D%E4%BD%9C"><span class="toc-text">第十二部分 分箱操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E9%83%A8%E5%88%86-%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88"><span class="toc-text">第十三部分 分组聚合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-%E5%88%86%E7%BB%84"><span class="toc-text">第一节 分组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88"><span class="toc-text">第二节 分组聚合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8A%82-%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88apply%E3%80%81transform"><span class="toc-text">第三节 分组聚合apply、transform</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E8%8A%82-%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88agg"><span class="toc-text">第四节 分组聚合agg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E8%8A%82-%E9%80%8F%E8%A7%86%E8%A1%A8"><span class="toc-text">第五节 透视表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%AE%A4%E5%9B%9B%E9%83%A8%E5%88%86-%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97"><span class="toc-text">第室四部分 时间序列</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-%E6%97%B6%E9%97%B4%E6%88%B3%E6%93%8D%E4%BD%9C"><span class="toc-text">第一节 时间戳操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-%E6%97%B6%E9%97%B4%E6%88%B3%E7%B4%A2%E5%BC%95"><span class="toc-text">第二节 时间戳索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8A%82-%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">第三节 时间序列常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E8%8A%82-%E6%97%B6%E5%8C%BA%E8%A1%A8"><span class="toc-text">第四节 时区表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E9%83%A8%E5%88%86-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-text">第十五部分 数据可视化</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/8d037627.html" title="Git 及 GitHub 常用命令记录"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/02/27/20230227141226-160f64.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git 及 GitHub 常用命令记录"/></a><div class="content"><a class="title" href="/posts/8d037627.html" title="Git 及 GitHub 常用命令记录">Git 及 GitHub 常用命令记录</a><time datetime="2023-02-27T06:08:31.000Z" title="发表于 2023-02-27 14:08:31">2023-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a6d8a9c3.html" title="个人常用 Linux 命令"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/article-img/2023/02/26/20230226105141-94929b.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="个人常用 Linux 命令"/></a><div class="content"><a class="title" href="/posts/a6d8a9c3.html" title="个人常用 Linux 命令">个人常用 Linux 命令</a><time datetime="2023-02-26T02:47:48.000Z" title="发表于 2023-02-26 10:47:48">2023-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3b91aa4a.html" title="Linux 服务器环境配置"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/4c417afa91736428def17dcc96aa64b8.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux 服务器环境配置"/></a><div class="content"><a class="title" href="/posts/3b91aa4a.html" title="Linux 服务器环境配置">Linux 服务器环境配置</a><time datetime="2022-09-14T08:01:29.000Z" title="发表于 2022-09-14 16:01:29">2022-09-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/165b6b1f.html" title="论文整理（3）Measuring Compositional Consistency for Video Question Answering"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/top2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="论文整理（3）Measuring Compositional Consistency for Video Question Answering"/></a><div class="content"><a class="title" href="/posts/165b6b1f.html" title="论文整理（3）Measuring Compositional Consistency for Video Question Answering">论文整理（3）Measuring Compositional Consistency for Video Question Answering</a><time datetime="2022-09-03T07:28:11.000Z" title="发表于 2022-09-03 15:28:11">2022-09-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/22673bc3.html" title="论文学习笔记整理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne-blog-img.oss-cn-hangzhou.aliyuncs.com/blog/img/dknjyLgQcEXhsuK.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="论文学习笔记整理"/></a><div class="content"><a class="title" href="/posts/22673bc3.html" title="论文学习笔记整理">论文学习笔记整理</a><time datetime="2022-08-24T05:50:52.000Z" title="发表于 2022-08-24 13:50:52">2022-08-24</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:kunhaofu1@gmail.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kuhne.gitee.io/kuhne.gitee.io/img/head.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/kuhne12" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="等待开发" href="/wait/">等待开发</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="等待开发" href="/wait/">等待开发</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2023 By <a class="footer-bar-link" href="/" title="Kuhne" target="_blank">Kuhne</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="浙ICP备2023005409号-1">浙ICP备2023005409号-1</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">74</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">30</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="/null" title="暂无"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="暂无"/><span class="back-menu-item-text">暂无</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=883682303&amp;server=netease&amp;type=playlist"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/essay/"><span> 闲言碎语</span></a></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/2022CVPR/" style="font-size: 0.88rem;">2022CVPR<sup>2</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/Kaggle/" style="font-size: 0.88rem;">Kaggle<sup>2</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/PyTorch/" style="font-size: 0.88rem;">PyTorch<sup>9</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>6</sup></a><a href="/tags/Pytorch/" style="font-size: 0.88rem;">Pytorch<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 0.88rem;">SpringCloud<sup>9</sup></a><a href="/tags/Vue/" style="font-size: 0.88rem;">Vue<sup>3</sup></a><a href="/tags/pycharm/" style="font-size: 0.88rem;">pycharm<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 0.88rem;">人工智能<sup>21</sup></a><a href="/tags/%E4%BD%9C%E4%B8%9A/" style="font-size: 0.88rem;">作业<sup>8</sup></a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 0.88rem;">加密<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 0.88rem;">后端<sup>2</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">基础<sup>12</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">工具<sup>3</sup></a><a href="/tags/%E5%BD%92%E7%BA%B3/" style="font-size: 0.88rem;">归纳<sup>3</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">教程<sup>10</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 0.88rem;">服务器<sup>1</sup></a><a href="/tags/%E6%9C%AA%E5%AE%8C%E6%88%90/" style="font-size: 0.88rem;">未完成<sup>1</sup></a><a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">机器学习<sup>21</sup></a><a href="/tags/%E6%A8%A1%E5%9E%8B%E5%A4%8D%E7%8E%B0/" style="font-size: 0.88rem;">模型复现<sup>8</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">深度学习<sup>15</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">网页前端<sup>4</sup></a><a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 0.88rem;">考研<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E5%85%B3%E7%B3%BB%E6%8E%A2%E6%B5%8B/" style="font-size: 0.88rem;">视觉关系探测<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E9%97%AE%E7%AD%94/" style="font-size: 0.88rem;">视觉问答<sup>1</sup></a><a href="/tags/%E8%A7%86%E9%A2%91%E9%97%AE%E7%AD%94/" style="font-size: 0.88rem;">视频问答<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/" style="font-size: 0.88rem;">计算机视觉<sup>12</sup></a><a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 0.88rem;">论文<sup>4</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="60198" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/playlist&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.cbd.int/katex@0.16.0/dist/katex.min.css"><script src="https://cdn.cbd.int/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    anzhiyu.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-api-pearl.vercel.app',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.18/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-api-pearl.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-api-pearl.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.18/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>